(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["site"],{"47c2":function(t,a,e){"use strict";function s(t,a,e,s="mfit"){return t?!t.endsWith(".svg")&&a&&e?this.ctx.IMG_SERVER+"/"+t+`?x-oss-process=image/format,png/quality,Q_80/resize,m_${s},h_${Math.floor(e)||100},w_${Math.floor(a)||100}`:this.ctx.IMG_SERVER+"/"+t:null}e.d(a,"a",(function(){return s}))},8533:function(t,a,e){"use strict";a["a"]=[{label:"头像装饰",value:"avatar"},{label:"移动幻灯片",value:"slide-mobile"},{label:"手机相框",value:"frame-mobile"}]},9241:function(t,a,e){"use strict";var s=e("d6c2"),i=e.n(s);i.a},"9ac0":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"site"}},[e("nav-bar"),e("section",{staticClass:"section"},[e("div",{staticClass:"tabs"},[e("ul",t._l(t.channels,(function(a){return e("li",{key:a.value,class:t.currentChannel===a.value?"is-active":"",on:{click:function(e){return t.switchChanel(a.value)}}},[e("a",[t._v(t._s(a.label))])])})),0)]),e("div",{staticClass:"columns is-mobile is-multiline"},[t._l(t.currentChannelWorks,(function(a){return e("div",{key:a.id,staticClass:"column is-half-mobile"},[e("figure",{staticClass:"image is-1by1"},[e("img",{attrs:{src:t.getImageUrl(a.snapshot)}})])])})),e("div",{staticClass:"column is-half-mobile"},[t._v(" Second column ")]),e("div",{staticClass:"column"},[t._v(" Third column ")]),e("div",{staticClass:"column"},[t._v(" Fourth column ")])],2),e("div",{staticClass:"columns"})]),e("nav-footer")],1)},i=[],n=e("9f91"),r=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"content has-text-centered"},[e("p",[t._v(" 网站备案号"),e("a",{attrs:{href:"http://www.beian.miit.gov.cn"}},[t._v(" 京ICP备14044474号-3")]),t._v(" | 蛋壳分享 is licensed "),e("a",{attrs:{href:"http://creativecommons.org/licenses/by-nc-sa/4.0/"}},[t._v("CC BY NC SA 4.0")]),t._v(". ")]),e("div",{staticClass:"bd-footer-tsp"},[t._v(" Source code licensed "),e("a",{attrs:{href:"https://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v(". ")]),e("div",[t._v(" © 2018-2020 DANKE.FUN ")])])])}],o={name:"NavFooter"},l=o,u=e("2877"),h=Object(u["a"])(l,r,c,!1,null,null,null),d=h.exports,v=e("8533"),p=e("b5f7"),m=e("47c2"),g={name:"Main",components:{NavFooter:d,NavBar:n["a"]},data(){return{currentChannel:null,currentChannelWorks:[],channels:v["a"]}},created(){this.workdao=new p["a"](this.ctx,"danke/work"),this.switchChanel(v["a"][0].value)},mounted(){},methods:{viewport(){return this.workViewPort},switchChanel(t){this.currentChannel=t,this.loadChannelWorks()},async loadChannelWorks(){const t=await this.workdao.list({projection:"updated,created,creator,name,id,frames,viewBox,title,author,avatar,color,snapshot",channels:this.currentChannel,page:this.page,count:this.count});this.currentChannelWorks=t.list,this.total=t.total,this.loading=!1},listQuery(){return{"system.site":"on"}},avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"},getImageUrl:m["a"],openWork(t){window.open("/slide/"+t.id)}}},f=g,b=(e("9241"),Object(u["a"])(f,s,i,!1,null,null,null));a["default"]=b.exports},"9f91":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[e("div",{staticClass:"navbar-brand"},[e("a",{staticClass:"navbar-item",attrs:{href:"http://www.danke.fun"}},[e("img",{attrs:{src:t.logo}})]),e("a",{staticClass:"navbar-item"},[t._v("蛋壳分享")]),e("a",{staticClass:"navbar-burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false"},on:{click:t.toggleMenuShow}},[e("span",{attrs:{"aria-hidden":"true"}}),e("span",{attrs:{"aria-hidden":"true"}}),e("span",{attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"navbar-menu",class:t.menuShow?"is-active":""},[e("div",{staticClass:"navbar-end"},[t.logon?e("a",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[e("img",{staticClass:"avatar is-rounded",attrs:{src:t.avatar}})]):e("div",{staticClass:"navbar-item"},[e("div",{staticClass:"buttons"},[e("router-link",{staticClass:"button is-primary",attrs:{to:"/login"}},[e("strong",[t._v("注册")])]),e("a",{staticClass:"button is-light"},[t._v(" 登录 ")])],1)])])])])},i=[],n=e("bd37"),r=e("47c2"),c=e("ec76"),o=e.n(c),l={name:"NavBar",props:{},data(){return{menuShow:!1,logo:o.a,user:this.ctx.user,isMobileOpened:!1}},computed:{burgerOpen(){return this.isMobileOpened?"is-active":""},logon(){return this.user.id},avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"}},created(){this.ctx.on&&this.ctx.on("user-updated",t=>{this.user=t})},mounted(){this.$router.beforeEach((t,a,e)=>{this.isMobileOpened=!1,e()})},methods:{getImageUrl:r["a"],toggleMenuShow(){this.menuShow=!this.menuShow},logout(){this.ctx.token=Object(n["b"])(),this.ctx.user=null,this.ctx.emit("user-updated",null),this.$router.push("/")},toggleOpen(){this.isMobileOpened=!this.isMobileOpened},getStarted(){this.$router.push("/user")},goUserHome(){this.$router.push("/user")}}},u=l,h=e("2877"),d=Object(h["a"])(u,s,i,!1,null,null,null);a["a"]=d.exports},b5f7:function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));class s{constructor(t,a){this.ctx=t,this.path=a}serialize(t){var a=[];for(var e in t)t.hasOwnProperty(e)&&t[e]&&a.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return a.join("&")}async getOne(t){const a=await this.ctx.get(`${this.path}/${t}`);return a.data.data}async list(t){const a=await this.ctx.get(`${this.path}?${this.serialize(t)}`);return a.data.data}async multiGet(t){const a=await this.ctx.post(this.path+"/id",{ids:t});return a.data.data}async update(t){return t._id&&await this.delete(t),delete t._id,this.create(t)}async createOrPatch(t){return t._id?this.patch(t._id,t):(delete t._id,this.create(t))}async create(t){const a=await this.ctx.post(""+this.path,t);return a.data.data}async regex(t,a,e){const s=await this.ctx.get(`${this.path}/regex/${t}/${a}?limit=${e||1e3}`);return s.data.data}async patch(t,a){const e=await this.ctx.patch(`${this.path}/${t}`,a);return e.data.data}async delete(t){if("string"===typeof t){const a=await this.ctx.delete(`${this.path}/${t}`);return a.data.data}{const a=await this.ctx.delete(`${this.path}/${t._id}`);return a.data.data}}async distinct(t,a){const e=await this.ctx.post(`${this.path}/distinct/${t}`,a);return e.data.data}}},d6c2:function(t,a,e){},ec76:function(t,a,e){t.exports=e.p+"img/D.83925969.png"}}]);