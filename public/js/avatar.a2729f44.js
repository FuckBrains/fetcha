(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["avatar"],{"0744":function(t,e,i){t.exports=i.p+"img/D.83925969.png"},1951:function(t,e,i){},"2bb5":function(t,e,i){"use strict";e.__esModule=!0;i("8122");e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2c7e":function(t,e,i){"use strict";function n(t,e){if(t.width<e.width&&t.height<e.height)return t;var i=t.width/t.height,n=e.width/e.height,o={};return i>n?(o.fitTo="width",o.width=e.width,o.height=Math.floor(t.height*(e.width/t.width))):(o.fitTo="height",o.width=Math.floor(t.width*(e.height/t.height)),o.height=e.height),o}function o(t,e,i,n=""){let o=null;return o=e&&i?{left:t.x*i.width/e.width+"px",top:t.y*i.height/e.height+"px",width:t.width*i.width/e.width+"px",height:t.height*i.height/e.height+"px"}:{left:t.x+"px",top:t.y+"px",width:t.width+"px",height:t.height+"px"},o}function r(t,e,i=0){return t.x-e.x<e.width+i&&t.x-e.x>-i&&t.y-e.y<e.height+i&&t.y-e.y>-i}function s(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)}i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return r})),i.d(e,"c",(function(){return s}))},"3c4e":function(t,e,i){"use strict";var n=function(t){return o(t)&&!r(t)};function o(t){return!!t&&"object"===typeof t}function r(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||c(t)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(t){return t.$$typeof===a}function l(t){return Array.isArray(t)?[]:{}}function h(t,e){var i=e&&!0===e.clone;return i&&n(t)?f(l(t),t,e):t}function u(t,e,i){var o=t.slice();return e.forEach((function(e,r){"undefined"===typeof o[r]?o[r]=h(e,i):n(e)?o[r]=f(t[r],e,i):-1===t.indexOf(e)&&o.push(h(e,i))})),o}function d(t,e,i){var o={};return n(t)&&Object.keys(t).forEach((function(e){o[e]=h(t[e],i)})),Object.keys(e).forEach((function(r){n(e[r])&&t[r]?o[r]=f(t[r],e[r],i):o[r]=h(e[r],i)})),o}function f(t,e,i){var n=Array.isArray(e),o=Array.isArray(t),r=i||{arrayMerge:u},s=n===o;if(s){if(n){var a=r.arrayMerge||u;return a(t,e,i)}return d(t,e,i)}return h(e,i)}f.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,i){return f(t,i,e)}))};var p=f;t.exports=p},"450d":function(t,e,i){},"47c2":function(t,e,i){"use strict";function n(t,e,i,n="mfit"){return t?!t.endsWith(".svg")&&e&&i?this.ctx.IMG_SERVER+"/"+t+`?x-oss-process=image/format,png/quality,Q_80/resize,m_${n},h_${Math.floor(i)||100},w_${Math.floor(e)||100}`:this.ctx.IMG_SERVER+"/"+t:null}i.d(e,"a",(function(){return n}))},4897:function(t,e,i){"use strict";e.__esModule=!0,e.i18n=e.use=e.t=void 0;var n=i("f0d9"),o=u(n),r=i("2b0e"),s=u(r),a=i("3c4e"),c=u(a),l=i("9d7e"),h=u(l);function u(t){return t&&t.__esModule?t:{default:t}}var d=(0,h.default)(s.default),f=o.default,p=!1,m=function(){var t=Object.getPrototypeOf(this||s.default).$t;if("function"===typeof t&&s.default.locale)return p||(p=!0,s.default.locale(s.default.config.lang,(0,c.default)(f,s.default.locale(s.default.config.lang)||{},{clone:!0}))),t.apply(this,arguments)},g=e.t=function(t,e){var i=m.apply(this,arguments);if(null!==i&&void 0!==i)return i;for(var n=t.split("."),o=f,r=0,s=n.length;r<s;r++){var a=n[r];if(i=o[a],r===s-1)return d(i,e);if(!i)return"";o=i}return""},v=e.use=function(t){f=t||f},w=e.i18n=function(t){m=t||m};e.default={use:v,t:g,i18n:w}},"6b7c":function(t,e,i){"use strict";e.__esModule=!0;var n=i("4897");e.default={methods:{t:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.t.apply(this,e)}}}},7532:function(t,e,i){"use strict";i.d(e,"b",(function(){return l})),i.d(e,"a",(function(){return h}));i("b5f7");function n(t){var e=document.createElement("style");return t&&(e.id=t),e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}function o(t){var e=document.createElement("svg");return t&&(e.id=t),e.style.display="none",document.body.appendChild(e),e}function r(t,e){let i=t.length;t.insertRule(e,i)}function s(t,e,i){let n=t.length;const o="@keyframes "+e+"{"+i+"}";t.insertRule(o,n)}function a(t,e){let i=t.length;const n=`.${e.name} {\n    animation: ${e.name} ${e.duration}ms ${e.timing} both\n  }`;t.insertRule(n,i)}async function c(t,e,i){const n=new FontFace(i,`url('${e}')`);await n.load(),document.fonts.add(n)}const l=[{id:"微软雅黑",name:"系统字体"},{id:"HYLeMiaoTiJ",name:"汉仪乐喵体简",url:"/fonts/HYLeMiaoTiJ.woff"},{id:"HYZiYanHuanLeSongW",name:"汉仪字研欢乐宋",url:"/fonts/HYZiYanHuanLeSongW.woff"},{id:"ChenYanXingKai",name:"字由点字晨颜行楷",url:"/fonts/HelloFont_ID_ChenYanXingKai.woff"},{id:"ChunYiTi",name:"字由点字春意体",url:"/fonts/ChunYiTi.woff"},{id:"WenQuanYi",name:"文泉仪黑体",url:"/fonts/wqy-microhei.woff"},{id:"HanyiTianZhen",name:"汉仪天真体",url:"/fonts/HYTianZhenTi.woff"},{id:"HanyiZhangnairen",name:"汉仪张乃仁行书",url:"/fonts/HYZhangNaiRenXingShuJ.woff"},{id:"SentyCreamPuff",name:"汉仪新蒂泡芙体",url:"/fonts/SentyCreamPuff.woff"},{id:"HanyiSentyGarden",name:"汉仪新蒂花园体",url:"/fonts/HanyiSentyGarden.woff"},{id:"HYRunYuan-65J",name:"汉仪润圆简",url:"/fonts/HYRunYuan-65J.woff"},{id:"HelloFont_WenYiHei",name:"字由文艺黑",url:"/fonts/HelloFont_WenYiHei.woff"},{id:"HelloFont_ID_ShouXieTongZhenTi",name:"字由点字书写童真体",url:"https://font-public.canva.cn/YAD88jfJsos/0/HelloFont_ID_ShouXieTongZhenTi.4cd0f3e5c.f0e0481de2533d3c68f1257eececb02f.woff"}];class h{constructor(t){this.sheet=n("style-registry"),this.styles={},this.svgfilters=[],this.keyframes={},this.svgs={},this.fonts={}}clear(){this.sheet&&this.sheet.parentElement&&this.sheet.parentElement.removeChild(this.sheet),this.sheet=n("style-registry"),this.svg=o("svg-filter-registry"),this.svgfilters=[],this.styles={},this.keyframes={},this.svgs={},this.fonts={}}addVector(t){this.svgs[t._id]=t.content}getVector(t){return this.svgs[t]}async addFontFace(t){let e=t;"string"===typeof e&&(e=l.filter(e=>e.id===t)[0]),e&&e.url&&!this.fonts[e.id]&&(await c(this.sheet,e.url,e.id),this.fonts[e.id]=e.url)}addStyle(t){if(!this.styles[t.name]){this.styles[t.name]=t.cssContent;const i=t.cssContent.split("}");for(let t of i)if(t&&t.trim())try{r(this.sheet,t+"}")}catch(e){console.log("illgel css content",t)}t.svgContent&&this.svgfilters.push(t.svgContent)}}addFrames(t){for(let e in t)this.addFrame({name:e,cssFrame:t[e]})}addFrame(t){this.keyframes[t.name]||(this.keyframes[t.name]=t.cssFrame,s(this.sheet,t.name,t.cssFrame),a(this.sheet,t))}getWorkColors(t){let e=[];for(let i of t.scenes){e=e.concat(this.getColorsFromStyle(i.style));for(let t of i.elements)e=e.concat(this.getColorsFromStyle(t.style))}return Array.from(new Set(e))}getColorsFromStyle(t){const e=[];for(let i in t)"background"===i&&e.push(t[i]),"color"===i&&e.push(t[i]);return e}}},"7f75":function(t,e,i){(function(e,i){t.exports=i()})("undefined"!==typeof self&&self,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"0ca3":function(t,e,i){"use strict";var n=i("c6aa"),o=i.n(n);o.a},7937:function(t,e,i){},"7fca":function(t,e,i){"use strict";var n=i("c10a"),o=i.n(n);o.a},8875:function(t,e,i){var n,o,r;(function(i,s){o=[],n=s,r="function"===typeof n?n.apply(e,o):n,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(u){var t,e,i,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,o=/@([^@]*):(\d+):(\d+)\s*$/gi,r=n.exec(u.stack)||o.exec(u.stack),s=r&&r[1]||!1,a=r&&r[2]||!1,c=document.location.href.replace(document.location.hash,""),l=document.getElementsByTagName("script");s===c&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=t.replace(e,"$1").trim());for(var h=0;h<l.length;h++){if("interactive"===l[h].readyState)return l[h];if(l[h].src===s)return l[h];if(s===c&&l[h].innerHTML&&l[h].innerHTML.trim()===i)return l[h]}return null}}return t}))},9334:function(t,e,i){"use strict";var n=i("7937"),o=i.n(n);o.a},c10a:function(t,e,i){},c6aa:function(t,e,i){},fb15:function(t,e,i){"use strict";if(i.r(e),i.d(e,"DEFAULT_BACKGROUND_COLOR",(function(){return M})),i.d(e,"DEFAULT_BORDER_RADIUS",(function(){return $})),i.d(e,"DEFAULT_ROW_LENGTH",(function(){return j})),i.d(e,"DEFAULT_TRIGGER_CONTAINER_SPACE",(function(){return T})),i.d(e,"DEFAULT_SWATCH_SIZE",(function(){return D})),i.d(e,"DEFAULT_SHOW_BORDER",(function(){return P})),i.d(e,"extractPropertyFromPreset",(function(){return B})),"undefined"!==typeof window){var n=window.document.currentScript,o=i("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var r=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(i.p=r[1])}var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-swatches",attrs:{tabindex:"-1"},on:{blur:function(e){return t.onBlur(e.relatedTarget)}}},[t.inline?t._e():i("div",{ref:"triggerWrapper",staticClass:"vue-swatches__trigger__wrapper",on:{click:t.togglePopover}},[t._t("trigger",[i("div",{staticClass:"vue-swatches__trigger",class:{"vue-swatches--is-empty":!t.value,"vue-swatches--is-disabled":t.disabled},style:t.triggerStyles},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isNoColor,expression:"isNoColor"}],staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[i("div",{staticClass:"vue-swatches__diagonal"})])])])],2),i("transition",{attrs:{name:"vue-swatches-show-hide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.inline||t.isOpen,expression:"inline || isOpen"}],ref:"containerWrapper",staticClass:"vue-swatches__container",class:{"vue-swatches--inline":t.inline},style:t.containerStyles},[i("div",{staticClass:"vue-swatches__wrapper",style:t.wrapperStyles},[t.isNested?t._l(t.computedSwatches,(function(e,n){return i("div",{key:n,staticClass:"vue-swatches__row"},t._l(e,(function(o,r){return i("v-swatch",{key:r,attrs:{"is-last":n===t.computedSwatches.length-1&&r===e.length,"row-length-setted":null!==t.rowLength||null!==t.presetRowLength,"border-radius":t.computedBorderRadius,disabled:t.getSwatchDisabled(o),inline:t.inline,selected:t.checkEquality(t.getSwatchColor(o),t.value),"swatch-size":t.computedSwatchSize,"spacing-size":t.computedSpacingSize,"show-border":t.getSwatchShowBorder(o),"show-checkbox":t.showCheckbox,"show-labels":t.showLabels,"swatch-color":t.getSwatchColor(o),"swatch-label":t.getSwatchLabel(o),"swatch-alt":t.getSwatchAlt(o),"swatch-style":t.swatchStyle},on:{blur:function(e){return t.onBlur(e)},click:function(e){return t.updateSwatch(o)}},nativeOn:{click:function(e){return t.updateSwatch(o)}}})})),1)})):t._l(t.computedSwatches,(function(e,n){return i("v-swatch",{key:n,attrs:{"is-last":n===t.computedSwatches.length-1,"row-length-setted":null!==t.rowLength||null!==t.presetRowLength,"border-radius":t.computedBorderRadius,disabled:t.getSwatchDisabled(e),inline:t.inline,selected:t.checkEquality(t.getSwatchColor(e),t.value),"swatch-size":t.computedSwatchSize,"spacing-size":t.computedSpacingSize,"show-border":t.getSwatchShowBorder(e),"show-checkbox":t.showCheckbox,"show-labels":t.showLabels,"swatch-color":t.getSwatchColor(e),"swatch-label":t.getSwatchLabel(e),"swatch-alt":t.getSwatchAlt(e),"swatch-style":t.swatchStyle},on:{blur:function(e){return t.onBlur(e)},click:function(i){return t.updateSwatch(e)}},nativeOn:{click:function(i){return t.updateSwatch(e)}}})}))],2),t.showFallback?i("div",{staticClass:"vue-swatches__fallback__wrapper",style:t.computedFallbackWrapperStyles},[i("span",{staticClass:"vue-swatches__fallback__input--wrapper"},[i("input",{ref:"fallbackInput",staticClass:"vue-swatches__fallback__input",class:t.fallbackInputClass,attrs:{type:t.fallbackInputType},domProps:{value:t.internalValue},on:{input:function(e){return t.updateSwatch(e.target.value,{fromFallbackInput:!0})}}})]),t.showFallbackOk?i("button",{staticClass:"vue-swatches__fallback__button",class:t.fallbackOkClass,on:{click:function(e){return e.preventDefault(),t.onFallbackButtonClick(e)}}},[t._v(" "+t._s(t.fallbackOkText)+" ")]):t._e()]):t._e()])])],1)},a=[],c={colors:["#1FBC9C","#1CA085","#2ECC70","#27AF60","#3398DB","#2980B9","#A463BF","#8E43AD","#3D556E","#222F3D","#F2C511","#F39C19","#E84B3C","#C0382B","#DDE6E8","#BDC3C8"],rowLength:4},l={colors:["#CC0001","#E36101","#FFCC00","#009900","#0066CB","#000000","#FFFFFF"],showBorder:!0},h={colors:[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]],borderRadius:"0",rowLength:10,swatchSize:24,spacingSize:0},u=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"vue-swatches__swatch",class:{"vue-swatches__swatch--border":e.showBorder,"vue-swatches__swatch--selected":e.selected,"vue-swatches__swatch--is-disabled":e.disabled},style:e.swatchStyles,attrs:{"aria-label":e.swatchAlt,role:"button",tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("click",e.swatchColor)},blur:function(e){return t.$emit("blur",e.relatedTarget)}}},[""===e.swatchColor?n("div",{staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[n("div",{staticClass:"vue-swatches__diagonal"})]):e._e(),n("v-check",{directives:[{name:"show",rawName:"v-show",value:e.showCheckbox&&e.selected,expression:"showCheckbox && selected"}]}),e.showLabels?n("div",{staticClass:"vue-swatches__swatch__label",style:e.labelStyles},[e._v(" "+e._s(e.swatchLabel)+" ")]):e._e()],1)},d=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-swatches__check__wrapper vue-swatches--has-children-centered"},[i("div",{staticClass:"vue-swatches__check__circle vue-swatches--has-children-centered"},[i("svg",{staticClass:"check",attrs:{version:"1.1",role:"presentation",width:"12",height:"12",viewBox:"0 0 1792 1792"}},[i("path",{staticClass:"vue-swatches__check__path",attrs:{d:"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"}})])])])},p=[],m={name:"v-check",data:function(){return{}}},g=m;function v(t,e,i,n,o,r,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(t,e){return c.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i("7fca");var w=v(g,f,p,!1,null,null,null),b=w.exports;function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?y(Object(i),!0).forEach((function(e){x(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function x(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var C={name:"v-swatch",components:{VCheck:b},props:{borderRadius:{type:String},isLast:{type:Boolean,default:!1},rowLengthSetted:{type:Boolean,default:!1},disabled:{type:Boolean},inline:{type:Boolean},selected:{type:Boolean,default:!1},showCheckbox:{type:Boolean},showBorder:{type:Boolean},showLabels:{type:Boolean},spacingSize:{type:Number},swatchColor:{type:String,default:""},swatchLabel:{type:String},swatchAlt:{type:String},swatchSize:{type:Number},swatchStyle:{type:Object}},data:function(){return{}},computed:{computedLabelStyle:function(){var t=8+3*Math.floor(this.spacingSize/5);return{bottom:"-".concat(t,"px")}},computedSwatchStyle:function(){var t={width:"".concat(this.swatchSize,"px"),height:"".concat(this.swatchSize,"px"),borderRadius:this.borderRadius,backgroundColor:""!==this.swatchColor?this.swatchColor:"#FFFFFF",cursor:this.cursorStyle};return this.inline&&this.isLast||(t.marginRight="".concat(this.spacingSize,"px")),this.inline&&!this.rowLengthSetted?t:S({},t,{marginBottom:"".concat(this.spacingSize,"px")})},cursorStyle:function(){return this.disabled?"not-allowed":"pointer"},labelStyles:function(){return[this.computedLabelStyle]},swatchStyles:function(){return[this.computedSwatchStyle,this.swatchStyle]}}},_=C,z=(i("0ca3"),v(_,u,d,!1,null,null,null)),R=z.exports;function E(t){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function k(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){A(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var M="#ffffff",$="10px",j=4,T=5,D=42,P=!1,B=function(t,e,i){return"string"!==typeof t?null:"text-basic"===t?void 0===l[e]?null:l[e]:"text-advanced"===t?void 0===h[e]?null:h[e]:"basic"===t||i?void 0===c[e]?null:c[e]:null},W={name:"v-swatches",components:{VSwatch:R},props:{backgroundColor:{type:String,default:M},closeOnSelect:{type:Boolean,default:!0},swatches:{type:[Array,String],default:function(){return"basic"}},disabled:{type:Boolean,default:!1},fallbackInputClass:{type:[Array,Object,String],default:null},fallbackInputType:{type:String,default:function(){return"text"},validator:function(t){return-1!==["text","color"].indexOf(t)}},fallbackOkClass:{type:[Array,Object,String],default:null},fallbackOkText:{type:String,default:"Ok"},inline:{type:Boolean,default:!1},shapes:{type:String,default:"squares"},popoverX:{type:String,default:"right"},popoverY:{type:String,default:"bottom"},rowLength:{type:[Number,String],default:null},showBorder:{type:Boolean,default:null},showFallback:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1},spacingSize:{type:Number,default:null},swatchSize:{type:[Number,String],default:null},swatchStyle:{type:[Object,Array],default:function(){}},triggerStyle:{type:[Object,Array],default:function(){}},wrapperStyle:{type:[Object,Array],default:function(){}},value:{type:String,default:null}},data:function(){return{alwaysOnScreenStyle:{},componentMounted:!1,internalValue:this.value,internalIsOpen:!1}},computed:{isNested:function(){return!!(this.computedSwatches&&this.computedSwatches.length&&this.computedSwatches[0]instanceof Array)},isOpen:function(){return!this.inline&&this.internalIsOpen},isNoColor:function(){return this.checkEquality("",this.value)},presetBorderRadius:function(){return B(this.swatches,"borderRadius")},presetRowLength:function(){return B(this.swatches,"rowLength")},presetShowBorder:function(){return B(this.swatches,"showBorder")},presetSwatchSize:function(){return B(this.swatches,"swatchSize")},presetSpacingSize:function(){return B(this.swatches,"spacingSize")},computedSwatches:function(){return this.swatches instanceof Array?this.swatches:"string"===typeof this.swatches?B(this.swatches,"colors",!0):[]},computedBorderRadius:function(){return null!==this.presetBorderRadius?this.presetBorderRadius:this.borderRadius},computedRowLength:function(){return null!==this.rowLength?Number(this.rowLength):null!==this.presetRowLength?this.presetRowLength:this.computedSwatches.length<j&&!this.isNested?this.computedSwatches.length:j},computedSwatchSize:function(){return null!==this.swatchSize?Number(this.swatchSize):null!==this.presetSwatchSize?this.presetSwatchSize:D},computedSpacingSize:function(){return null!==this.spacingSize?this.spacingSize:null!==this.presetSpacingSize?this.presetSpacingSize:Math.round(.25*this.computedSwatchSize)},computedShowBorder:function(){return null!==this.showBorder?this.showBorder:null!==this.presetShowBorder?this.presetShowBorder:P},showFallbackOk:function(){return!this.inline},borderRadius:function(){return"squares"===this.shapes?"".concat(Math.round(.25*this.computedSwatchSize),"px"):"circles"===this.shapes?"50%":""},wrapperWidth:function(){return this.computedRowLength*(this.computedSwatchSize+this.computedSpacingSize)},computedtriggerStyle:function(){return{width:"42px",height:"42px",backgroundColor:this.value?this.value:"#ffffff",borderRadius:"circles"===this.shapes?"50%":$}},triggerStyles:function(){return[this.computedtriggerStyle,this.triggerStyle]},containerStyles:function(){var t=[{backgroundColor:this.backgroundColor},this.alwaysOnScreenStyle];return this.inline?t:[].concat(t,[{padding:"5px",marginBottom:"5px"}])},computedWrapperStyle:function(){return this.inline?{}:{paddingTop:"".concat(this.computedSpacingSize,"px"),paddingLeft:"".concat(this.computedSpacingSize,"px"),width:"".concat(this.wrapperWidth,"px")}},wrapperStyles:function(){return[this.computedWrapperStyle,this.wrapperStyle]},computedFallbackWrapperStyle:function(){var t={marginLeft:"".concat(this.computedSpacingSize,"px"),paddingBottom:"".concat(this.computedSpacingSize,"px")};return this.inline?t:k({},t,{width:"".concat(this.wrapperWidth-this.computedSpacingSize,"px")})},computedFallbackWrapperStyles:function(){return[this.computedFallbackWrapperStyle]}},watch:{value:function(t){this.internalValue=t}},mounted:function(){this.componentMounted=!0},methods:{checkEquality:function(t,e){return!(!t&&""!==t||!e&&""!==e)&&t.toUpperCase()===e.toUpperCase()},hidePopover:function(){this.internalIsOpen=!1,this.$el.blur(),this.$emit("close",this.internalValue)},getAlwaysOnScreenStyle:function(){var t={},e=this.$refs.triggerWrapper,i=this.$refs.containerWrapper;if(!this.componentMounted||this.inline||!e||!window||!document)return t;var n=e.getBoundingClientRect(),o=5,r=(document.documentElement.clientWidth||window.innerWidth)-5,s=5,a=(document.documentElement.clientHeight||window.innerHeight)-5;i.style.visibility="hidden",i.style.display="block";var c=i.getBoundingClientRect();return i.style.display="none",i.style.visibility="visible","top"===this.popoverY?n.top-c.height<s?(t.top="".concat(n.height+T,"px"),t.bottom="auto"):(t.bottom="".concat(n.height+T,"px"),t.top="auto"):"bottom"===this.popoverY&&(n.bottom+c.height>a?(t.bottom="".concat(n.height+T,"px"),t.top="auto"):(t.top="".concat(n.height+T,"px"),t.bottom="auto")),"left"===this.popoverX?n.right-c.width<o?(t.left=0,t.right="auto"):(t.right=0,t.left="auto"):"right"===this.popoverX&&(n.left+c.width>r?(t.right=0,t.left="auto"):(t.left=0,t.right="auto")),t},getSwatchShowBorder:function(t){return"string"===typeof t?this.computedShowBorder:"object"===E(t)?void 0!==t.showBorder?t.showBorder:this.computedShowBorder:void 0},getSwatchColor:function(t){return"string"===typeof t?t:"object"===E(t)?t.color:void 0},getSwatchDisabled:function(t){return"string"===typeof t?this.disabled:"object"===E(t)?void 0!==t.disabled?t.disabled:this.disabled:void 0},getSwatchLabel:function(t){return"string"===typeof t?t:"object"===E(t)?t.label||t.color:void 0},getSwatchAlt:function(t){return"string"===typeof t?t:"object"===E(t)?t.alt||this.getSwatchLabel(t):void 0},onBlur:function(t){this.isOpen&&(null!==t&&this.$el.contains(t)||(this.internalIsOpen=!1,this.$emit("close",this.internalValue)))},onFallbackButtonClick:function(){this.hidePopover()},showPopover:function(){this.isOpen||this.inline||this.disabled||(this.alwaysOnScreenStyle=this.getAlwaysOnScreenStyle(),this.internalIsOpen=!0,this.$el.focus(),this.$emit("open"))},togglePopover:function(){this.isOpen?this.hidePopover():this.showPopover()},updateSwatch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.fromFallbackInput;if(!this.getSwatchDisabled(t)){var n=this.getSwatchColor(t);this.internalValue=n,this.$emit("input",n),!this.closeOnSelect||this.inline||i||this.hidePopover()}}}},F=W,L=(i("9334"),v(F,s,a,!1,null,null,null)),H=L.exports;e["default"]=H}})["default"]}))},8122:function(t,e,i){"use strict";e.__esModule=!0,e.isEmpty=e.isEqual=e.arrayEquals=e.looseEqual=e.capitalize=e.kebabCase=e.autoprefixer=e.isFirefox=e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.noop=l,e.hasOwn=h,e.toObject=d,e.getPropByPath=f,e.rafThrottle=w,e.objToArray=b;var o=i("2b0e"),r=a(o),s=i("a742");function a(t){return t&&t.__esModule?t:{default:t}}var c=Object.prototype.hasOwnProperty;function l(){}function h(t,e){return c.call(t,e)}function u(t,e){for(var i in e)t[i]=e[i];return t}function d(t){for(var e={},i=0;i<t.length;i++)t[i]&&u(e,t[i]);return e}e.getValueByPath=function(t,e){e=e||"";for(var i=e.split("."),n=t,o=null,r=0,s=i.length;r<s;r++){var a=i[r];if(!n)break;if(r===s-1){o=n[a];break}n=n[a]}return o};function f(t,e,i){var n=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var o=e.split("."),r=0,s=o.length;r<s-1;++r){if(!n&&!i)break;var a=o[r];if(!(a in n)){if(i)throw new Error("please transfer a valid prop path to form item!");break}n=n[a]}return{o:n,k:o[r],v:n?n[o[r]]:null}}e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var i=0;i!==t.length;++i)if(t[i]!==e[i])return!1;return!0},e.escapeRegexpString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var p=e.arrayFindIndex=function(t,e){for(var i=0;i!==t.length;++i)if(e(t[i]))return i;return-1},m=(e.arrayFind=function(t,e){var i=p(t,e);return-1!==i?t[i]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!r.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!r.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},e.isFirefox=function(){return!r.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},e.autoprefixer=function(t){if("object"!==("undefined"===typeof t?"undefined":n(t)))return t;var e=["transform","transition","animation"],i=["ms-","webkit-"];return e.forEach((function(e){var n=t[e];e&&n&&i.forEach((function(i){t[i+e]=n}))})),t},e.kebabCase=function(t){var e=/([^-])([A-Z])/g;return t.replace(e,"$1-$2").replace(e,"$1-$2").toLowerCase()},e.capitalize=function(t){return(0,s.isString)(t)?t.charAt(0).toUpperCase()+t.slice(1):t},e.looseEqual=function(t,e){var i=(0,s.isObject)(t),n=(0,s.isObject)(e);return i&&n?JSON.stringify(t)===JSON.stringify(e):!i&&!n&&String(t)===String(e)}),g=e.arrayEquals=function(t,e){if(t=t||[],e=e||[],t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!m(t[i],e[i]))return!1;return!0},v=(e.isEqual=function(t,e){return Array.isArray(t)&&Array.isArray(e)?g(t,e):m(t,e)},e.isEmpty=function(t){if(null==t)return!0;if("boolean"===typeof t)return!1;if("number"===typeof t)return!t;if(t instanceof Error)return""===t.message;switch(Object.prototype.toString.call(t)){case"[object String]":case"[object Array]":return!t.length;case"[object File]":case"[object Map]":case"[object Set]":return!t.size;case"[object Object]":return!Object.keys(t).length}return!1});function w(t){var e=!1;return function(){for(var i=this,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];e||(e=!0,window.requestAnimationFrame((function(n){t.apply(i,o),e=!1})))}}function b(t){return Array.isArray(t)?t:v(t)?[]:[t]}},"8aaa":function(t,e,i){"use strict";var n=i("f6e0"),o=i.n(n);o.a},"9d7e":function(t,e,i){"use strict";e.__esModule=!0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){function e(t){for(var e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return 1===i.length&&"object"===n(i[0])&&(i=i[0]),i&&i.hasOwnProperty||(i={}),t.replace(r,(function(e,n,r,s){var a=void 0;return"{"===t[s-1]&&"}"===t[s+e.length]?r:(a=(0,o.hasOwn)(i,r)?i[r]:null,null===a||void 0===a?"":a)}))}return e};var o=i("8122"),r=/(%|)\{([0-9a-zA-Z_]+)\}/g},a742:function(t,e,i){"use strict";function n(t){return"[object String]"===Object.prototype.toString.call(t)}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function r(t){return t&&t.nodeType===Node.ELEMENT_NODE}e.__esModule=!0,e.isString=n,e.isObject=o,e.isHtmlElement=r;e.isFunction=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},e.isUndefined=function(t){return void 0===t},e.isDefined=function(t){return void 0!==t&&null!==t}},b3a4:function(t,e,i){},b5f7:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t,e){this.ctx=t,this.path=e}serialize(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&t[i]&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}async getOne(t){const e=await this.ctx.get(`${this.path}/${t}`);return e.data.data}async list(t){const e=await this.ctx.get(`${this.path}?${this.serialize(t)}`);return e.data.data}async multiGet(t){const e=await this.ctx.post(this.path+"/id",{ids:t});return e.data.data}async update(t){return t._id&&await this.delete(t),delete t._id,this.create(t)}async createOrPatch(t){return t._id?this.patch(t._id,t):(delete t._id,this.create(t))}async create(t){const e=await this.ctx.post(""+this.path,t);return e.data.data}async regex(t,e,i){const n=await this.ctx.get(`${this.path}/regex/${t}/${e}?limit=${i||1e3}`);return n.data.data}async patch(t,e){const i=await this.ctx.patch(`${this.path}/${t}`,e);return i.data.data}async delete(t){if("string"===typeof t){const e=await this.ctx.delete(`${this.path}/${t}`);return e.data.data}{const e=await this.ctx.delete(`${this.path}/${t._id}`);return e.data.data}}async distinct(t,e){const i=await this.ctx.post(`${this.path}/distinct/${t}`,e);return i.data.data}}},c009:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"avatar-home"}},[i("div",{staticClass:"container"},[i("div",{staticClass:"logo-wrapper"},[i("img",{attrs:{src:t.logo}}),t._m(0)]),i("div",{staticClass:"body"},[i("div",{staticClass:"raw-avatar"},[i("div",{staticClass:"preview-original"},[i("img",{staticClass:"raw",attrs:{src:t.userAvatar},on:{click:t.requestDownload}}),t.currentWork?i("img",{attrs:{src:t.getImageUrl(t.currentWork.snapshot,240,240)}}):t._e()]),i("div",{staticClass:"raw-preview-container"},[i("div",{staticClass:"preview size-radius-10"},[i("img",{staticClass:"raw",attrs:{src:t.userAvatar}}),t.currentWork?i("img",{attrs:{src:t.getImageUrl(t.currentWork.snapshot,240,240)}}):t._e()]),i("div",{staticClass:"preview size-radius-20"},[i("img",{staticClass:"raw",attrs:{src:t.userAvatar}}),t.currentWork?i("img",{attrs:{src:t.getImageUrl(t.currentWork.snapshot,240,240)}}):t._e()]),i("div",{staticClass:"preview size-radius-30"},[i("img",{staticClass:"raw",attrs:{src:t.userAvatar}}),t.currentWork?i("img",{attrs:{src:t.getImageUrl(t.currentWork.snapshot,240,240)}}):t._e()]),i("div",{staticClass:"preview size-circle"},[i("img",{staticClass:"raw",attrs:{src:t.userAvatar}}),t.currentWork?i("img",{attrs:{src:t.getImageUrl(t.currentWork.snapshot,240,240)}}):t._e()])]),i("div",{staticClass:"variables",staticStyle:{display:"none"}},t._l(t.variables,(function(e,n){return i("div",{key:n,staticClass:"variable"},["color"===e.type?i("div",{staticClass:"color-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"variable.value"}],domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}}),i("v-swatches",{attrs:{"row-length":t.width>400?6:5,"popover-y":"bottom","trigger-style":{width:"32px",height:"32px"},shapes:"circles"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"variable.value"}})],1):t._e(),"text"===e.type?i("div",{staticClass:"text-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"variable.value"}],domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}})]):t._e()])})),0),i("div",{staticClass:"action"},[i("el-button",{on:{click:function(e){return t.$refs.file.click()}}},[t._v(" 更换 "),i("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.uploadImage(e)}}})]),i("el-button",{on:{click:t.requestDownload}},[t._v("下载")])],1)]),i("div",{staticClass:"template-recents"},[i("div",{staticClass:"title"},[t._v(" 最新 ")]),i("ul",{staticClass:"work-list-wrapper"},t._l(t.recents,(function(e){return i("li",{key:e._id},[i("div",{staticClass:"work-wrapper",on:{click:function(i){return t.applyDecorator(e)}}},[i("img",{attrs:{src:t.getImageUrl(e.snapshot,240,240)}})])])})),0)]),i("div",{staticClass:"template-category"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.image,expression:"image"}],staticClass:"avatar-crop-container"},[i("div",{staticClass:"avatar-crop"},[i("cropper",{ref:"cropper",staticClass:"upload-example-cropper",attrs:{"stencil-props":{handlers:{},movable:!1,scalable:!1,aspectRatio:1},"image-restriction":"stencil","default-boundaries":function(){return{width:t.width,height:t.width}},src:t.image}})],1),i("div",{staticClass:"action"},[i("el-button",{on:{click:t.uploadTempAvatar}},[t._v(" 确定 ")]),i("el-button",{on:{click:function(e){t.image=null}}},[t._v("取消")])],1)])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"share"},[t._v("由 "),i("a",{attrs:{href:"http://danke.fun"}},[t._v("蛋壳分享")]),t._v(" 提供")])}],r=(i("1951"),i("450d"),i("eedf")),s=i.n(r),a=(i("f225"),i("89a9")),c=i.n(a),l=i("b5f7"),h=i("0744"),u=i.n(h),d=i("47c2"),f=i("d05f"),p=i("2b0e");function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i,n=0;n<e.length;n++)i=e[n],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}function w(t,e,i){return e&&v(t.prototype,e),i&&v(t,i),t}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function S(t){for(var e,i=1;i<arguments.length;i++)e=null==arguments[i]?{}:arguments[i],i%2?y(Object(e),!0).forEach((function(i){b(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}));return t}function x(t){return C(t)||_(t)||z(t)||E()}function C(t){if(Array.isArray(t))return R(t)}function _(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function z(t,e){if(t){if("string"==typeof t)return R(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(t,e,i){return i={path:e,exports:{},require:function(t,e){return k(t,void 0===e||null===e?i.path:e)}},t(i,i.exports),i.exports}function k(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var A=O((function(t){(function(){function e(){for(var t,n=[],o=0;o<arguments.length;o++)if(t=arguments[o],t){var r=typeof t;if("string"===r||"number"===r)n.push(t);else if(Array.isArray(t)&&t.length){var s=e.apply(null,t);s&&n.push(s)}else if("object"===r)for(var a in t)i.call(t,a)&&t[a]&&n.push(a)}return n.join(" ")}var i={}.hasOwnProperty;t.exports?(e.default=e,t.exports=e):window.classNames=e})()})),M=function(t){return function(e,i){if(!e)return t;var n;"string"==typeof e?n=e:i=e;var o=t;return n&&(o+="__"+n),o+(i?Object.keys(i).reduce((function(t,e){var n=i[e];return n&&(t+=" "+("boolean"==typeof n?o+"--"+e:o+"--"+e+"_"+n)),t}),""):"")}};function $(t,e,i){function n(){var l=Date.now()-a;l<e&&0<=l?o=setTimeout(n,e-l):(o=null,!i&&(c=t.apply(s,r),s=r=null))}var o,r,s,a,c;null==e&&(e=100);var l=function(){s=this,r=arguments,a=Date.now();var l=i&&!o;return o||(o=setTimeout(n,e)),l&&(c=t.apply(s,r),s=r=null),c};return l.clear=function(){o&&(clearTimeout(o),o=null)},l.flush=function(){o&&(c=t.apply(s,r),s=r=null,clearTimeout(o),o=null)},l}$.debounce=$;var j=$,T=["left","right"],D=["top","bottom"],P=["left","right","top","bottom"],B=["area","stencil","none"],W=4,F={left:0,top:0,width:0,height:0};function L(t,e){var i,n;return t&&e?(i="".concat(t).concat(e[0].toUpperCase()).concat(e.slice(1)),n="".concat(t,"-").concat(e)):(i=t||e,n=t||e),{name:i,classname:n}}function H(t){return/^data:/.test(t)||/^blob:/.test(t)}function I(t){if(H(t))return!1;var e=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],n={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},o=function(t){return{"http:":80,"https:":443}[t]},r=function(t){return t.port||o(t.protocol||e.protocol)};return(n.protocol||n.host||n.port)&&!(n.protocol&&n.protocol==e.protocol&&n.host&&n.host==e.host&&n.host&&r(n)==r(e))}function N(t){return"undefined"==typeof t}function Y(t){return"object"===m(t)&&null!==t}function U(t,e){var i=Math.pow;return Math.sqrt(i(t.x-e.x,2)+i(t.y-e.y,2))}function X(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=S({enabled:!!t},e);return Y(t)&&(i=S(S({},i),t)),i}function q(t){var e=Number.isNaN,i=+t;return e(i)?t:i}function V(t,e,i){return G(t),!0}function G(t){return(!t||0===Object.keys(t).length)&&"function"!=typeof t}function Z(t){return!!t.naturalWidth}var J=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};g(this,t),this.type="manipulateImage",this.nativeEvent=e,this.move=i,this.scale=n,this.params=o},K=function t(e,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};g(this,t),this.type="resize",this.nativeEvent=e,this.directions=i,this.params=n},Q=function t(e,i){g(this,t),this.type="move",this.nativeEvent=e,this.directions=i},tt=function(){function t(e,i,n,o,r){g(this,t),this.nativeEvent=e,this.position=n,this.previousPosition=o,this.element=i,this.anchor=r}return w(t,[{key:"shift",value:function(){var t=this.element,e=this.anchor,i=this.position,n=t.getBoundingClientRect(),o=n.left,r=n.top;return{left:i.left-o-e.left,top:i.top-r-e.top}}}]),t}();function et(t,e,i){return i=i||["width","height","left","top"],!i.some((function(i){return t[i]!==e[i]}))}function it(t,e){return{left:t.left-e.left,top:t.top-e.top}}function nt(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function ot(t){return{left:-t.left,top:-t.top}}function rt(t,e){return S(S({},t),{},{left:t.left+e.left,top:t.top+e.top})}function st(t,e,i,n){if(i){var o=at(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(i.left-o.left)*(n||1-e),top:t.top+t.height*(1-e)/2+(i.top-o.top)*(n||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}function at(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function ct(t){return t.width/t.height}function lt(t,e){var i=ct(t),n=ct(e);return i>n?{width:e.width,height:e.width*i}:{width:e.height*i,height:e.height}}function ht(t,e){var i={left:0,top:0},n=pt(t,e);return 0<n.left?i.left=n.left:0<n.right&&(i.left=-n.right),0<n.top?i.top=n.top:0<n.bottom&&(i.top=-n.bottom),i}function ut(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function dt(t,e){return Math.min("left"in e&&"right"in e?(e.right-e.left)/t.width:1/0,"top"in e&&"bottom"in e?(e.bottom-e.top)/t.height:1/0)}function ft(t){return!t||!t.width||!t.height}function pt(t,e){var i=Math.max,n={};return P.forEach((function(o){N(e[o])||(n[o]=i(0,"left"===o||"top"===o?e[o]-ut(t)[o]:ut(t)[o]-e[o]))})),n}function mt(t){var e=Math.max,i=Math.min,n=t.directions,o=t.coordinates,r=t.positionRestrictions,s=void 0===r?{}:r,a=t.sizeRestrictions,c=t.preserveRatio,l=t.compensate,h=S({},n),u=nt(o,h).width,d=nt(o,h).height;0>u&&(0>h.left&&0>h.right?(h.left=-(o.width-a.minWidth)/(h.left/h.right),h.right=-(o.width-a.minWidth)/(h.right/h.left)):0>h.left?h.left=-(o.width-a.minWidth):0>h.right&&(h.right=-(o.width-a.minWidth))),0>d&&(0>h.top&&0>h.bottom?(h.top=-(o.height-a.minHeight)/(h.top/h.bottom),h.bottom=-(o.height-a.minHeight)/(h.bottom/h.top)):0>h.top?h.top=-(o.height-a.minHeight):0>h.bottom&&(h.bottom=-(o.height-a.minHeight)));var f=pt(nt(o,h),s);l&&(0<f.left&&0===f.right?(h.right+=f.left,h.left-=f.left):0<f.right&&0===f.left&&(h.left+=f.right,h.right-=f.right),0<f.top&&0===f.bottom?(h.bottom+=f.top,h.top-=f.top):0<f.bottom&&0===f.top&&(h.top+=f.bottom,h.bottom-=f.bottom),f=pt(nt(o,h),s));var p={width:1/0,height:1/0};if(P.forEach((function(t){p[t]=f[t]&&h[t]?e(0,1-f[t]/h[t]):1/0})),c){var m=i.apply(Math,x(P.map((function(t){return p[t]}))));m!==1/0&&P.forEach((function(t){h[t]*=m}))}else P.forEach((function(t){p[t]!==1/0&&(h[t]*=p[t])}));if(u=nt(o,h).width,d=nt(o,h).height,h.right+h.left&&(u>a.maxWidth?p.width=(a.maxWidth-o.width)/(h.right+h.left):u<a.minWidth&&(p.width=(a.minWidth-o.width)/(h.right+h.left))),h.bottom+h.top&&(d>a.maxHeight?p.height=(a.maxHeight-o.height)/(h.bottom+h.top):d<a.minHeight&&(p.height=(a.minHeight-o.height)/(h.bottom+h.top))),c){var g=i(p.width,p.height);g!==1/0&&P.forEach((function(t){h[t]*=g}))}else p.width!==1/0&&T.forEach((function(t){h[t]*=p.width})),p.height!==1/0&&D.forEach((function(t){h[t]*=p.height}));return h}function gt(t,e){var i;return e.minimum&&t<e.minimum?i=e.minimum:e.maximum&&t>e.maximum&&(i=e.maximum),i}function vt(t){var e=Math.abs,i=Math.max,n=t.event,o=t.coordinates,r=t.aspectRatio,s=t.positionRestrictions,a=t.sizeRestrictions,c=S(S({},o),{},{right:o.left+o.width,bottom:o.top+o.height}),l=n.params||{},h=S({},n.directions),u=S(S({},a),{},{minWidth:i(a.minWidth,a.minimum),minHeight:i(a.minHeight,a.minimum)}),d=l.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};P.forEach((function(t){d[t]||(h[t]=0)})),h=mt({coordinates:c,directions:h,sizeRestrictions:u,positionRestrictions:s});var f=nt(c,h).width,p=nt(c,h).height,m=l.preserveRatio?ct(c):gt(f/p,r);if(m){var g=l.respectDirection;if(g||(g=c.width>=c.height||1===m?"width":"height"),"width"===g){var v=f/m-c.height;d.top&&d.bottom?(h.bottom=v/2,h.top=v/2):d.bottom?h.bottom=v:d.top?h.top=v:d.right?h.right=0:d.left&&(h.left=0)}else if("height"===g){var w=c.width-p*m;d.left&&d.right?(h.left=-w/2,h.right=-w/2):d.left?h.left=-w:d.right?h.right=-w:d.top?h.top=0:d.bottom&&(h.bottom=0)}h=mt({directions:h,coordinates:c,sizeRestrictions:u,positionRestrictions:s,preserveRatio:!0,compensate:l.compensate})}return f=nt(c,h).width,p=nt(c,h).height,m=l.preserveRatio?ct(c):gt(f/p,r),.001<e(m-f/p)&&P.forEach((function(t){d[t]||(h[t]=0)})),wt({event:new Q({},{left:-h.left,top:-h.top}),coordinates:{width:o.width+h.right+h.left,height:o.height+h.top+h.bottom,left:o.left,top:o.top},positionRestrictions:s})}function wt(t){var e=t.event,i=t.coordinates,n=t.positionRestrictions,o=void 0===n?{}:n,r=rt(i,e.directions);return rt(r,ht(r,o))}function bt(t){var e=Math.max,i=Math.min,n=t.coordinates,o=t.visibleArea,r=t.areaRestrictions,s=S({},o),a=S({},n),c=e(0,a.width-s.width),l=e(0,a.height-s.height);return c>l?s=st(s,i(a.width/s.width,dt(s,r))):l>c&&(s=st(s,i(a.height/s.height,dt(s,r)))),s=rt(s,ot(ht(a,ut(s)))),s=rt(s,ht(s,r)),{visibleArea:s}}function yt(t){var e=Math.abs,i=Math.max,n=Math.min,o=Math.pow,r=t.event,s=t.coordinates,a=t.visibleArea,c=t.sizeRestrictions,l=t.areaRestrictions,h=t.positionRestrictions,u=t.settings,d=r.scale,f=r.move,p=S({},a),m=S({},s),g=1,v=1,w=!u.frozenDirections.width&&!u.frozenDirections.height&&.001<e(d.factor-1);p=rt(p,{left:f.left||0,top:f.top||0});var b={stencil:{minimum:i(c.minWidth?c.minWidth/m.width:0,c.minHeight?c.minHeight/m.height:0),maximum:n(c.maxWidth?c.maxWidth/m.width:1/0,c.maxHeight?c.maxHeight/m.height:1/0,dt(m,h))},area:{maximum:dt(p,l)}};w&&(1>d.factor?v=i(d.factor,b.stencil.minimum):1<d.factor&&(v=n(d.factor,n(b.area.maximum,b.stencil.maximum)))),v&&(p=st(p,v,d.center));var y={left:s.left-a.left,right:a.width+a.left-(s.width+s.left),top:s.top-a.top,bottom:a.height+a.top-(s.height+s.top)};return p=rt(p,ht(p,l)),p=rt(p,ht(p,{left:h.left-y.left*v,top:h.top-y.top*v,bottom:h.bottom+y.bottom*v,right:h.right+y.right*v})),m.width*=v,m.height*=v,m.left=p.left+y.left*v,m.top=p.top+y.top*v,w&&u.stencil&&(1<d.factor?g=n(b.area.maximum,d.factor)/v:1>d.factor&&(g=i(m.height/p.height,d.factor)/v),p=st(p,g,at(m),o(1<d.factor?b.area.maximum:m.height/p.height,2)),p=rt(p,ht(p,l))),{coordinates:m,visibleArea:p}}function St(t){var e=Math.max,i=Math.min,n=Math.pow;function o(t,e){return n(t.width-e.width,2)+n(t.height-e.height,2)}function r(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return t.width>=Math.floor(t.height*u.minimum)&&t.width<=Math.ceil(t.height*u.maximum)&&t.height<=h.maxHeight&&t.width<=h.maxWidth&&t.width&&t.height&&(e||t.height>=h.minHeight&&t.width>=h.minWidth)}function s(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return t.reduce((function(t,i){return r(i,e)&&(!t||o(i,{width:a,height:c})<o(t,{width:a,height:c}))?i:t}),null)}var a=t.width,c=t.height,l=t.aspectRatio,h=t.sizeRestrictions,u={minimum:l.minimum||0,maximum:l.maximum||1/0},d={width:e(h.minWidth,i(h.maxWidth,a)),height:e(h.minHeight,i(h.maxHeight,c))},f=[];[l.minimum,l.maximum].forEach((function(t){t&&f.push({width:d.width,height:d.width/t},{width:d.height*t,height:d.height})})),r(d)&&f.push(d);var p=s(f);return p||s(f,!0)}function xt(t){var e=Math.min,i=t.current,n=t.previous,o=t.areaRestrictions,r=t.coordinates,s=S({},i);if(n.width&&n.height&&!et(i,n)){s=n.width>r.width?st(s,e(n.height/s.height,dt(s,o))):st(s,e(n.width/s.width,dt(s,o))),s=rt(s,it(at(n),at(s))),s=rt(s,ht(s,o));var a=pt(r,ut(s));a.left+a.right+a.top+a.bottom&&(s=a.left+a.right>a.top+a.bottom?st(s,e((s.width+a.left+a.right)/s.width,dt(s,o))):st(s,e((s.width+a.top+a.bottom)/s.height,dt(s,o))))}return s}function Ct(t){var e=Math.min,i=t.visibleArea,n=t.coordinates,o=t.aspectRatio,r=t.sizeRestrictions,s=t.positionRestrictions,a=S({},n);return ft(a)||(a=S(S({},a),St({width:a.width,height:a.height,aspectRatio:o,sizeRestrictions:{maxWidth:i.width,maxHeight:i.height,minHeight:e(i.height,r.minHeight),minWidth:e(i.width,r.minWidth)}})),a=rt(a,it(at(n),at(a))),a=rt(a,ht(a,ut(s)))),a}function _t(t){var e=t.imageSize,i=t.boundaries,n=ct(e),o=ct(i),r={height:n>o?e.height:e.width/o,width:n>o?e.height*o:e.width};return{left:e.width/2-r.width/2,top:e.height/2-r.height/2,width:r.width,height:r.height}}function zt(t){var e=t.stretcher,i=t.imageSize,n=ct(i);i.height>i.width?(e.style.height="".concat(i.height,"px"),e.style.width="".concat(e.clientHeight*n,"px"),e.clientWidth/e.clientHeight!==n&&(e.style.height="".concat(e.clientWidth/n,"px"))):(e.style.width="".concat(i.width,"px"),e.style.height="".concat(e.clientWidth/n,"px"),e.clientHeight/e.clientWidth!==n&&(e.style.width="".concat(e.clientHeight*n,"px")))}function Rt(t){var e=t.cropper,i=t.imageSize,n=e.clientHeight,o=e.clientWidth,r=n,s=i.width*n/i.height;return s>o&&(s=o,r=i.height*o/i.width),{width:s,height:r}}function Et(t,e){var i=Math.max,n=Math.min,o={};return P.forEach((function(r){N(t[r])||N(e[r])?e[r]?o[r]=e[r]:t[r]&&(o[r]=t[r]):o[r]="left"===r||"top"===r?i(t[r],e[r]):n(t[r],e[r])})),o}function Ot(t,e){return Et(t,ut(e))}function kt(t){var e=t.imageSize,i=t.imageRestriction,n={};return"none"!==i&&(n={left:0,top:0,right:e.width,bottom:e.height}),n}function At(t){var e=t.imageSize,i=t.imageRestriction,n={};return"area"===i&&(n={left:0,top:0,right:e.width,bottom:e.height}),n}function Mt(t){var e=t.visibleArea,i=t.coordinates;return{left:e.left+e.width/2-i.width/2,top:e.top+e.height/2-i.height/2}}function $t(t){var e=Math.min,i=t.visibleArea,n=t.aspectRatio,o=t.sizeRestrictions;return St({width:.8*i.width,height:.8*i.height,aspectRatio:n,sizeRestrictions:S(S({},o),{},{maxWidth:e(i.width,o.maxWidth),maxHeight:e(i.height,o.maxHeight)})})}function jt(t){var e=t.imageSize,i=t.minWidth,n=t.minHeight,o=t.maxWidth,r=t.maxHeight;return{minWidth:i/100*e.width,minHeight:n/100*e.height,maxWidth:o/100*e.width,maxHeight:r/100*e.height}}function Tt(t){var e=Math.round,i=Math.ceil,n=Math.floor,o=t.coordinates,r=t.sizeRestrictions,s=t.positionRestrictions,a={width:e(o.width),height:e(o.height),left:e(o.left),top:e(o.top)};return a.width>r.maxWidth?a.width=n(o.width):a.width<r.minWidth&&(a.width=i(o.width)),a.height>r.maxHeight?a.height=n(o.height):a.height<r.minHeight&&(a.height=i(o.height)),(a.left<s.left||a.left+a.width>s.right)&&(a.left=n(s.left)),(a.top<s.top||a.top+a.height>s.bottom)&&(a.top=n(s.top)),a}function Dt(t){var e=t.event,i=t.visibleArea,n=t.coefficient,o=t.frozenDirections;if("manipulateImage"===e.type)return S(S({},e),{},{move:{left:e.move.left?n*e.move.left:0,top:e.move.top?n*e.move.top:0},scale:{factor:e.scale.factor||1,center:e.scale.center?{left:e.scale.center.left*n+i.left,top:e.scale.center.top*n+i.top}:null}});if("resize"===e.type){var r=S({},e);return o.width&&(r.directions.left=0,r.directions.right=0),o.height&&(r.directions.top=0,r.directions.bottom=0),P.forEach((function(t){r.directions[t]*=n})),r}if("move"===e.type){var s=S({},e);return P.forEach((function(t){s.directions[t]*=n})),s}}function Pt(t){var e=t.visibleArea,i=t.boundaries,n=S({},e),o=ct(i);return n.width/n.height!==o&&(n.height=n.width/o),n}function Bt(t){var e=Math.min,i=t.sizeRestrictions,n=t.imageSize,o=t.visibleArea,r=t.positionRestrictions,s=t.imageRestriction,a=void 0===s?"none":s,c=S({},i);if("left"in r&&"right"in r&&(c.maxWidth=e(c.maxWidth,r.right-r.left)),"top"in r&&"bottom"in r&&(c.maxHeight=e(c.maxHeight,r.bottom-r.top)),"none"!==a){var l=lt(o,n),h="area"===a?l.width:n.width,u="area"===a?l.height:n.height;(!c.maxWidth||c.maxWidth>h)&&(c.maxWidth=h),(!c.maxHeight||c.maxHeight>u)&&(c.maxHeight=u)}return c.minWidth>c.maxWidth&&(c.minWidth=c.maxWidth,c.widthFrozen=!0),c.minHeight>c.maxHeight&&(c.minHeight=c.maxHeight,c.heightFrozen=!0),c.minWidth=e(c.minWidth,o.width),c.minHeight=e(c.minHeight,o.height),c}function Wt(t,e,i){var n=Math.PI,o=i.flipped,r=i.orientation,s=e.naturalWidth,a=e.naturalHeight,c=t.getContext("2d");return t.width=s,t.height=a,c.save(),o&&(t.width=a,t.height=s),2==r?(c.translate(s,0),c.scale(-1,1)):3==r?(c.translate(s,a),c.rotate(1*n)):4==r?(c.translate(0,a),c.scale(1,-1)):5==r?(c.rotate(.5*n),c.scale(1,-1)):6==r?(c.rotate(.5*n),c.translate(0,-a)):7==r?(c.rotate(1.5*n),c.translate(-s,a),c.scale(1,-1)):8==r&&(c.translate(0,s),c.rotate(1.5*n)),c.drawImage(e,0,0,s,a),c.restore(),t}function Ft(t){var e={orientation:t};return t&&(2===t?e.scaleX=-1:3===t?e.rotate=-180:4===t?e.scaleY=-1:5===t?(e.rotate=90,e.scaleY=-1):6===t?e.rotate=90:7===t?(e.rotate=90,e.scaleX=-1):8===t&&(e.rotate=-90)),(90===e.rotate||-90===e.rotate)&&(e.flipped=!0),e}function Lt(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,o="";return(e||i||n)&&(e&&(o+=" rotate(".concat(e,"deg) ")),i&&(o+=" scaleX(".concat(i,") ")),n&&(o+=" scaleY(".concat(n,") "))),o}function Ht(t){return new Promise((function(e){It(t).then((function(i){e(i?{source:t,arrayBuffer:i,orientation:Xt(i)}:{source:t,arrayBuffer:null,orientation:null})})).catch((function(i){console.warn(i),e({source:t,arrayBuffer:null,orientation:null})}))}))}function It(t){return new Promise((function(e,i){try{if(t)if(/^data:/i.test(t))e(Yt(t));else if(/^blob:/i.test(t)){var n=new FileReader;n.onload=function(t){e(t.target.result)},Nt(t,(function(t){n.readAsArrayBuffer(t)}))}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState!==W||(200===o.status||0===o.status?e(o.response):i("Warning: could not load an image to parse its orientation"),o=null)},o.onprogress=function(){"image/jpeg"!==o.getResponseHeader("content-type")&&o.abort()},o.withCredentials=!1,o.open("GET",t,!0),o.responseType="arraybuffer",o.send(null)}else i("Error: the image is empty")}catch(e){i(e)}}))}function Nt(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(){(200==this.status||0===this.status)&&e(this.response)},i.send()}function Yt(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,n=new ArrayBuffer(i),o=new Uint8Array(n),r=0;r<i;r++)o[r]=e.charCodeAt(r);return n}function Ut(t,e,i){var n,o="";for(n=e,i+=e;n<i;n++)o+=String.fromCharCode(t.getUint8(n));return o}function Xt(t){try{var e,i,n,o,r,s,a=new DataView(t);if(255===a.getUint8(0)&&216===a.getUint8(1))for(var c=a.byteLength,l=2;l+1<c;){if(255===a.getUint8(l)&&225===a.getUint8(l+1)){r=l;break}l++}if(r&&(i=r+4,n=r+10,"Exif"===Ut(a,i,4))){var h=a.getUint16(n);if(o=18761===h,(o||19789===h)&&42===a.getUint16(n+2,o)){var u=a.getUint32(n+4,o);8<=u&&(s=n+u)}}if(s)for(var d,f=a.getUint16(s,o),p=0;p<f;p++)if(d=s+12*p+2,274===a.getUint16(d,o)){d+=8,e=a.getUint16(d,o),a.setUint16(d,1,o);break}return e}catch(t){return null}}function qt(t){for(var e=[],i=8192,n=new Uint8Array(t);0<n.length;){var o=n.subarray(0,i);e.push(String.fromCharCode.apply(null,Array.from?Array.from(o):Array.slice(o))),n=n.subarray(i)}return"data:image/jpeg;base64,".concat(btoa(e.join("")))}var Vt={beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&!this.disabled&&1===t.touches.length&&(this.touches=x(t.touches),!this.hovered&&this.$emit("enter"),t.touches.length&&this.initAnchor(this.touches.reduce((function(e,i){return{clientX:e.clientX+i.clientX/t.touches.length,clientY:e.clientY+i.clientY/t.touches.length}}),{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){if(!this.disabled){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(t){var e=this.$refs.draggable,i=e.getBoundingClientRect(),n=i.left,o=i.right,r=i.bottom,s=i.top;this.anchor={left:t.clientX-n,top:t.clientY-s,bottom:r-t.clientY,right:o-t.clientX}},processMove:function(t,e){var i=x(e);if(this.touches.length){if(1===this.touches.length&&1===i.length){var n=this.$refs.draggable;this.$emit("drag",new tt(t,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches=[],this.hovered&&(this.$emit("leave"),this.hovered=!1)}}},Gt={name:"DraggableElement",mixins:[Vt],props:{classname:{type:String}}};function Zt(t,e,i,n,o,r,s,a,c,l){"boolean"!=typeof s&&(c=a,a=s,s=!1);const h="function"==typeof i?i.options:i;let u;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,o&&(h.functional=!0)),n&&(h._scopeId=n),r?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},h._ssrRegister=u):e&&(u=s?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(h.functional){const t=h.render;h.render=function(e,i){return u.call(i),t(e,i)}}else{const t=h.beforeCreate;h.beforeCreate=t?[].concat(t,u):[u]}return i}var Jt=Gt,Kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"draggable",class:t.classname,on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseleave:t.onMouseLeave}},[t._t("default")],2)},Qt=[],te=void 0,ee=void 0,ie=void 0,ne=!1,oe=Zt({render:Kt,staticRenderFns:Qt},te,Jt,ee,ne,ie,!1,void 0,void 0,void 0),re=M("vue-handler-wrapper"),se={name:"HandlerWrapper",components:{DraggableElement:oe},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1},classname:{type:String,validator:function(t){return V(t,"classname","class")}}},computed:{classes:function(){var t;if(this.horizontalPosition||this.verticalPosition){var e,i=L(this.horizontalPosition,this.verticalPosition);t=A(this.classname,re((e={},b(e,i.classname,!0),b(e,"disabled",this.disabled),e)))}else t=A(this.classname,re({disabled:this.disabled}));return{root:t,draggable:re("draggable")}}}},ae=se,ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("DraggableElement",{class:t.classes.draggable,attrs:{disabled:t.disabled},on:{drag:function(e){return t.$emit("drag",e)},leave:function(){return t.$emit("leave")},enter:function(){return t.$emit("enter")}}},[t._t("default")],2)],1)},le=[],he=void 0,ue=void 0,de=void 0,fe=!1,pe=Zt({render:ce,staticRenderFns:le},he,ae,ue,fe,de,!1,void 0,void 0,void 0),me=M("vue-line-wrapper"),ge={name:"LineWrapper",components:{DraggableElement:oe},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var t;return me((t={},b(t,this.position,!0),b(t,"disabled",this.disabled),t))}}},ve=ge,we=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DraggableElement",{class:t.classname,attrs:{disabled:t.disabled},on:{drag:function(e){return t.$emit("drag",e)},leave:function(){return t.$emit("leave")},enter:function(){return t.$emit("enter")}}},[t._t("default")],2)},be=[],ye=void 0,Se=void 0,xe=void 0,Ce=!1,_e=Zt({render:we,staticRenderFns:be},ye,ve,Se,Ce,xe,!1,void 0,void 0,void 0),ze=M("vue-square-handler"),Re={name:"SimpleHandler",components:{HandlerWrapper:pe},props:{classname:{type:String},hoverClassname:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classnames:function(){return{default:A(ze(b({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}},Ee=Re,Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HandlerWrapper",{attrs:{"vertical-position":t.verticalPosition,"horizontal-position":t.horizontalPosition,disabled:t.disabled},on:{drag:t.onDrag}},[i("div",{class:t.classnames.default})])},ke=[],Ae=void 0,Me=void 0,$e=void 0,je=!1,Te=Zt({render:Oe,staticRenderFns:ke},Ae,Ee,Me,je,$e,!1,void 0,void 0,void 0),De=M("vue-bounding-box"),Pe=["east","west",null],Be=["south","north",null],We={name:"BoundingBox",props:{handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlerComponent:{type:[Object,String],default:function(){return Te}},handlersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},lineComponent:{type:[Object,String]},linesClasses:{type:Object,default:function(){return{}}},scalable:{type:Boolean,default:!0},classname:{type:String,validator:function(t){return V(t,"classname","class")}},linesClassnames:{type:Object,default:function(){return{}},validator:function(t){return V(t,"linesClassnames","linesClasses")}},handlersClassnames:{type:Object,default:function(){return{}},validator:function(t){return V(t,"handlersClassnames","handlersClasses")}}},data:function(){var t=[];return Pe.forEach((function(e){Be.forEach((function(i){if(e!==i){var n=L(e,i),o=n.name,r=n.classname;t.push({name:o,classname:r,verticalDirection:i,horizontalDirection:e})}}))})),{points:t}},computed:{classes:function(){var t=G(this.handlersClasses)?this.handlersClassnames:this.handlersClasses,e=G(this.linesClasses)?this.linesClassnames:this.linesClasses;return{root:A(De(),this.classname),handlers:t,lines:e}},lineNodes:function(){var t=this,e=[];return this.points.forEach((function(i){i.horizontalDirection&&i.verticalDirection||!t.lines[i.name]||e.push({name:i.name,component:t.lineComponent,class:A(t.classes.lines.default,t.classes.lines[i.name],!t.scalable&&t.classes.lines.disabled),hoverClass:t.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!t.scalable})})),e},handlerNodes:function(){var t=this,e=[];return this.points.forEach((function(i){t.handlers[i.name]&&e.push({name:i.name,component:t.handlerComponent,class:A(t.classes.handlers.default,t.classes.handlers[i.name]),hoverClass:t.classes.handlers.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!t.scalable})})),e}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onHandlerDrag:function(t,e,i){var n,o=t.shift(),r=o.left,s=o.top,a={left:0,right:0,top:0,bottom:0};"west"===e?a.left-=r:"east"==e&&(a.right+=r),"north"===i?a.top-=s:"south"==i&&(a.bottom+=s),!i&&e?n="width":i&&!e&&(n="height"),this.scalable&&this.$emit("resize",new K(t.nativeEvent,a,{allowedDirections:{left:"west"===e||!e,right:"east"===e||!e,bottom:"south"===i||!i,top:"north"===i||!i},preserveAspectRatio:t.nativeEvent.shiftKey,respectDirection:n}))}}},Fe=We,Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"box",class:t.classes.root},[t._t("default"),t._v(" "),i("div",t._l(t.lineNodes,(function(e){return i(e.component,{key:e.name,tag:"component",attrs:{classname:e.class,"hover-classname":e.hoverClass,position:e.name,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)}}})})),1),t._v(" "),i("div",t._l(t.handlerNodes,(function(e){return i(e.component,{key:e.name,tag:"component",attrs:{classname:e.class,"hover-classname":e.hoverClass,"horizontal-position":e.horizontalDirection,"vertical-position":e.verticalDirection,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)}}})})),1)],2)},He=[],Ie=void 0,Ne=void 0,Ye=void 0,Ue=!1,Xe=Zt({render:Le,staticRenderFns:He},Ie,Fe,Ne,Ue,Ye,!1,void 0,void 0,void 0),qe=M("vue-draggable-area"),Ve={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:10}},computed:{classnames:function(){return{default:A(qe(),this.classname)}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(t){if(t.cancelable){var e=this.movable&&1===t.touches.length;e&&(this.touches=x(t.touches)),(this.touchStarted||e)&&(t.preventDefault(),t.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(t){1<=this.touches.length&&(this.touchStarted?(this.processMove(t,t.touches),t.preventDefault(),t.stopPropagation()):U({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:t.touches[0].clientX,y:t.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(t){if(this.movable){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},onMouseUp:function(){this.touches=[]},initAnchor:function(t){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,o=i.top;this.anchor={x:t.clientX-n,y:t.clientY-o}},processMove:function(t,e){var i=x(e);if(this.touches.length){var n=this.$refs.container,o=n.getBoundingClientRect(),r=o.left,s=o.top;1===this.touches.length&&1===i.length&&this.$emit("move",new Q(t,{left:i[0].clientX-(r+this.anchor.x),top:i[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches=[]}}},Ge=Ve,Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown}},[t._t("default")],2)},Je=[],Ke=void 0,Qe=void 0,ti=void 0,ei=!1,ii=Zt({render:Ze,staticRenderFns:Je},Ke,Ge,Qe,ei,ti,!1,void 0,void 0,void 0),ni=M("vue-preview-result"),oi={name:"PreviewResult",props:{img:{type:Object},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},imageClass:{type:String},classname:{type:String,validator:function(t){return V(t,"classname","class")}},imageClassname:{type:String,validator:function(t){return V(t,"imageClassname","imageClass")}}},computed:{classes:function(){return{root:A(ni(),this.classname),image:A(ni("image"),this.imageClass||this.imageClassname),wrapper:ni("wrapper")}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")}},imageStyle:function(){var t=this.img.transforms,e=t.flipped,i=this.img.coefficient,n=this.img.size.height/i,o=this.img.size.width/i,r={width:"".concat(o,"px"),height:"".concat(n,"px")};return e?(r.width="".concat(n,"px"),r.height="".concat(o,"px"),r.left="".concat(-this.stencilCoordinates.left-t.translateX-(n-o)/2,"px"),r.top="".concat(-this.stencilCoordinates.top-t.translateY-(o-n)/2,"px")):(r.left="".concat(-this.stencilCoordinates.left-t.translateX,"px"),r.top="".concat(-this.stencilCoordinates.top-t.translateY,"px")),r.transform=Lt(t),r}}},ri=oi,si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.img.src}})])])},ai=[],ci=void 0,li=void 0,hi=void 0,ui=!1,di=Zt({render:si,staticRenderFns:ai},ci,ri,li,ui,hi,!1,void 0,void 0,void 0),fi={name:"CropperWrapper",props:{touchMove:{type:Object,required:!0},mouseMove:{type:Object,required:!0},touchResize:{type:Object,required:!0},wheelResize:{type:Object,required:!0}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onTouchStart:function(t){if(t.cancelable&&(this.touchMove.enabled||this.touchResize.enabled&&1<t.touches.length)){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,o=i.top,r=i.bottom,s=i.right;this.touches=x(t.touches).filter((function(t){return t.clientX>n&&t.clientX<s&&t.clientY>o&&t.clientY<r})),this.oldGeometricProperties=this.calculateGeometricProperties(this.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation()}},onTouchEnd:function(t){0===t.touches.length&&this.processEnd()},onTouchMove:function(t){var e=this;if(this.touches.length){var i=x(t.touches).filter((function(t){return!t.identifier||e.touches.find((function(e){return e.identifier===t.identifier}))}));this.processMove(t,i),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}},onMouseDown:function(t){if(this.mouseMove&&"buttons"in t&&1===t.buttons){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault())},onMouseUp:function(){this.touches=[]},calculateGeometricProperties:function(t){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,o=i.top,r={left:0,top:0},s=0;return t.forEach((function(e){r.left+=(e.clientX-n)/t.length,r.top+=(e.clientY-o)/t.length})),t.forEach((function(t){s+=U({x:r.left,y:r.top},{x:t.clientX-n,y:t.clientY-o})})),{centerMass:r,spread:s,count:t.length}},processMove:function(t,e){if(this.touches.length){if(1===this.touches.length&&1===e.length&&this.touchMove.enabled)this.$emit("move",new J(t,{left:this.touches[0].clientX-e[0].clientX,top:this.touches[0].clientY-e[0].clientY}));else if(1<this.touches.length&&this.touchResize){var i=this.oldGeometricProperties,n=this.calculateGeometricProperties(e);i.count===n.count&&1<i.count&&this.$emit("resize",new J(t,{left:i.centerMass.left-n.centerMass.left,top:i.centerMass.top-n.centerMass.top},{factor:i.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=e}},processEnd:function(){this.touches=[]},onWheel:function(t){if(this.wheelResize.enabled){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,o=i.top,r=1+this.wheelResize.ratio*Math.sign(t.deltaY||t.detail||t.wheelDelta),s={left:t.clientX-n,top:t.clientY-o};this.$emit("resize",new J(t,{},{factor:r,center:s})),t.preventDefault(),t.stopPropagation()}}}},pi=fi,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,wheel:t.onWheel}},[t._t("default")],2)},gi=[],vi=void 0,wi=void 0,bi=void 0,yi=!1,Si=Zt({render:mi,staticRenderFns:gi},vi,pi,wi,yi,bi,!1,void 0,void 0,void 0),xi=M("vue-simple-line"),Ci={name:"SimpleLine",components:{LineWrapper:_e},props:{classname:{type:String},hoverClassname:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:A(xi(b({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}},_i=Ci,zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("LineWrapper",{attrs:{position:t.position,disabled:t.disabled},on:{enter:t.onEnter,leave:t.onLeave,drag:t.onDrag}},[i("div",{class:t.classes.root})])},Ri=[],Ei=void 0,Oi=void 0,ki=void 0,Ai=!1,Mi=Zt({render:zi,staticRenderFns:Ri},Ei,_i,Oi,Ai,ki,!1,void 0,void 0,void 0),$i=M("vue-rectangle-stencil"),ji={name:"RectangleStencil",components:{PreviewResult:di,BoundingBox:Xe,DraggableArea:ii},props:{img:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlerComponent:{type:[Object,String],default:function(){return Te}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return Mi}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},classname:{type:String,validator:function(t){return V(t,"classname","class")}},previewClassname:{type:String,validator:function(t){return V(t,"previewClassname","previewClass")}},boundingBoxClassname:{type:String,validator:function(t){return V(t,"boundingBoxClassname","boundingBoxClass")}},linesClassnames:{type:Object,validator:function(t){return V(t,"linesClassnames","linesClasses")}},handlersClassnames:{type:Object,validator:function(t){return V(t,"handlersClassnames","handlersClasses")}}},computed:{classes:function(){return{stencil:A($i({movable:this.movable}),this.classname),preview:A($i("preview"),this.previewClass||this.previewClassname),boundingBox:A($i("bounding-box"),this.boundingBoxClass||this.boundingBoxClassname)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,o=t.top;return{width:"".concat(i,"px"),height:"".concat(e,"px"),left:"".concat(n,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(t){this.$emit("move",t)},onResize:function(t){this.$emit("resize",t)},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}},Ti=ji,Di=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("BoundingBox",{class:t.classes.boundingBox,attrs:{handlers:t.handlers,"handler-component":t.handlerComponent,"handlers-classnames":t.handlersClassnames,"handlers-classes":t.handlersClasses,lines:t.lines,"line-component":t.lineComponent,"lines-classnames":t.linesClassnames,"lines-classes":t.linesClasses,scalable:t.scalable},on:{resize:t.onResize}},[i("DraggableArea",{attrs:{movable:t.movable},on:{move:t.onMove}},[i("PreviewResult",{class:t.classes.preview,attrs:{img:t.img,"stencil-coordinates":t.stencilCoordinates}})],1)],1)],1)},Pi=[],Bi=void 0,Wi=void 0,Fi=void 0,Li=!1,Hi=Zt({render:Di,staticRenderFns:Pi},Bi,Ti,Wi,Li,Fi,!1,void 0,void 0,void 0),Ii=M("vue-circle-stencil"),Ni={name:"CircleStencil",components:{PreviewResult:di,BoundingBox:Xe,DraggableArea:ii},props:{img:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlerComponent:{type:[Object,String],default:function(){return Te}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return Mi}},movable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},classname:{type:String,validator:function(t){return V(t,"classname","class")}},previewClassname:{type:String,validator:function(t){return V(t,"previewClassname","previewClass")}},boundingBoxClassname:{type:String,validator:function(t){return V(t,"boundingBoxClassname","boundingBoxClass")}},linesClassnames:{type:Object,validator:function(t){return V(t,"linesClassnames","linesClasses")}},handlersClassnames:{type:Object,validator:function(t){return V(t,"handlersClassnames","handlersClasses")}}},computed:{classes:function(){return{stencil:A(Ii(),this.classname),preview:A(Ii("preview"),this.previewClass||this.previewClassname),boundingBox:A(Ii("bounding-box"),this.boundingBoxClass||this.boundingBoxClassname)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,o=t.top;return{width:"".concat(i,"px"),height:"".concat(e,"px"),left:"".concat(n,"px"),top:"".concat(o,"px")}}},methods:{onMove:function(t){this.$emit("move",t)},onResize:function(t){this.$emit("resize",t)},aspectRatios:function(){return{minimum:1,maximum:1}}}},Yi=Ni,Ui=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("BoundingBox",{class:t.classes.boundingBox,attrs:{handlers:t.handlers,"handler-component":t.handlerComponent,"handlers-classes":t.handlersClasses,"handlers-classnames":t.handlersClassnames,lines:t.lines,"line-component":t.lineComponent,"lines-classes":t.linesClasses,"lines-classnames":t.linesClassnames,scalable:t.scalable},on:{resize:t.onResize}},[i("DraggableArea",{attrs:{movable:t.movable},on:{move:t.onMove}},[i("PreviewResult",{class:t.classes.preview,attrs:{img:t.img,"stencil-coordinates":t.stencilCoordinates}})],1)],1)],1)},Xi=[],qi=void 0,Vi=void 0,Gi=void 0,Zi=!1,Ji=Zt({render:Ui,staticRenderFns:Xi},qi,Yi,Vi,Zi,Gi,!1,void 0,void 0,void 0),Ki=M("vue-advanced-cropper"),Qi={name:"Cropper",components:{CropperWrapper:Si},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Hi}},stencilProps:{type:Object,default:function(){return{}}},imageClass:{type:String},areaClass:{type:String},backgroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},canvas:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},crossOrigin:{type:String,default:"anonymous"},transitionTime:{type:Number,default:300},wheelResize:{type:[Boolean,Object],default:!0},touchResize:{type:[Boolean,Object],default:!0},touchMove:{type:[Boolean,Object],default:!0},mouseMove:{type:[Boolean,Object],default:!0},imageRestriction:{type:String,default:"area",validator:function(t){return-1!==B.indexOf(t)}},roundResult:{type:Boolean,default:!0},resizeAlgorithm:{type:Function,default:vt},moveAlgorithm:{type:Function,default:wt},initStretcher:{type:Function,default:zt},fitCoordinates:{type:Function,default:Ct},updateVisibleArea:{type:Function,default:xt},defaultVisibleArea:{type:Function,default:_t},defaultSize:{type:Function,default:$t},defaultPosition:{type:Function,default:Mt},defaultBoundaries:{type:Function,default:Rt},areaRestrictionsAlgorithm:{type:Function,default:At},sizeRestrictionsAlgorithm:{type:Function,default:jt},positionRestrictionsAlgorithm:{type:Function,default:kt},restrictions:{type:Function,validator:function(t){return V(t,"restrictions","sizeRestrictionsAlgorithm")}},classname:{type:String,validator:function(t){return V(t,"classname","class")}},imageClassname:{type:String,validator:function(t){return V(t,"imageClassname","imageClass")}},areaClassname:{type:String,validator:function(t){return V(t,"areaClassname","areaClass")}},backgroundClassname:{type:String,validator:function(t){return V(t,"backgroundClassname","backgroundClass")}}},data:function(){return{imageLoaded:!1,imageAttributes:{crossOrigin:!1,src:null},basicImageTransforms:{rotate:null,scaleX:null,scaleY:null},imageSize:{width:null,height:null},boundaries:{width:null,height:null},visibleArea:{},coordinates:S({},F),frozenDirections:{width:!1,height:!1}}},computed:{settings:function(){return{resize:X(this.resize,{stencil:!1}),touchResize:X(this.touchResize),touchMove:X(this.touchMove),mouseMove:X(this.mouseMove),wheelResize:X(this.wheelResize,{ratio:.1}),frozenDirections:this.frozenDirections,imageRestriction:this.imageRestriction}},coefficient:function(){return this.visibleArea.width?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.areaRestrictionsAlgorithm({imageSize:this.imageSize,visibleArea:this.visibleArea,imageRestriction:this.imageRestriction})},areaStyle:function(){return{width:this.boundaries.width?"".concat(this.boundaries.width,"px"):"auto",height:this.boundaries.height?"".concat(this.boundaries.height,"px"):"auto",opacity:this.imageLoaded?1:0,transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"}},imageStyle:function(){var t={left:"".concat(this.imageSize.width/(2*this.coefficient)-this.imageTransforms.translateX,"px"),top:"".concat(this.imageSize.height/(2*this.coefficient)-this.imageTransforms.translateY,"px"),transform:"translate(-50%, -50%)"+Lt(this.imageTransforms)},e=this.imageTransforms.flipped;return e?(t.width="".concat(this.imageSize.height/this.coefficient,"px"),t.height="".concat(this.imageSize.width/this.coefficient,"px")):(t.width="".concat(this.imageSize.width/this.coefficient,"px"),t.height="".concat(this.imageSize.height/this.coefficient,"px")),t},sizeRestrictions:function(){return this.calculateSizeRestrictions()},positionRestrictions:function(){return this.calculatePositionRestrictions()},classes:function(){return{cropper:A(Ki(),this.classname),image:A(Ki("image"),this.imageClass||this.imageClassname),area:A(Ki("area"),this.areaClass||this.areaClassname),stretcher:A(Ki("stretcher")),background:A(Ki("background"),this.backgroundClass||this.backgroundClassname),imageWrapper:A(Ki("image-wrapper")),cropperWrapper:A(Ki("cropper-wrapper"))}},imageTransforms:function(){return S(S({},this.basicImageTransforms),{},{scaleX:this.basicImageTransforms.scaleX||1,scaleY:this.basicImageTransforms.scaleY||1,translateX:this.visibleArea.left/this.coefficient,translateY:this.visibleArea.top/this.coefficient})},stencilCoordinates:function(){var t=this.coordinates,e=t.width,i=t.height,n=t.left,o=t.top;return{width:e/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(o-this.visibleArea.top)/this.coefficient}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"".concat(this.stencilCoordinates.left,"px"),top:"".concat(this.stencilCoordinates.top,"px")}}},watch:{src:function(){this.onChangeImage()},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.resetCoordinates()},stencilProps:function(t,e){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(i){return t[i]!==e[i]}))&&this.$nextTick(this.onPropsChange)}},mounted:function(){var t=this;this.debouncedUpdate=j(this.update,this.debounce),this.$refs.image.addEventListener("load",(function(){t.onSuccessLoadImage()})),this.$refs.image.addEventListener("error",(function(){t.onFailLoadImage()})),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{getResult:function(){var t=this.prepareResult(S({},this.coordinates));return this.canvas&&this.src&&this.imageLoaded?(this.updateCanvas(this.coordinates),{coordinates:t,visibleArea:S({},this.visibleArea),canvas:this.$refs.canvas}):{coordinates:t,visibleArea:S({},this.visibleArea)}},zoom:function(t,e){this.onManipulateImage(new J(null,{},{factor:1/t,center:e}))},move:function(t,e){this.onManipulateImage(new J(null,{left:t||0,top:e||0}))},setCoordinates:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=i.autoZoom;this.$nextTick((function(){e.imageLoaded?e.applyTransforms(t,!(void 0!==n)||n):e.delayedTransforms=t}))},prepareResult:function(t){return this.roundResult?Tt(S(S({},this.getPublicProperties()),{},{coordinates:t})):t},autoZoom:function(t){var e=bt(S(S({},this.getPublicProperties()),{},{coordinates:t})),i=e.visibleArea;this.visibleArea=i},normalizeEvent:function(t){return Dt(S(S({},this.getPublicProperties()),{},{event:t}))},updateCanvas:function(t){if(this.$refs.canvas){var e=this.$refs.image,i=this.checkOrientation?Wt(this.$refs.sourceCanvas,e,this.imageTransforms):e,n=this.$refs.canvas;n.width=t.width,n.height=t.height;var o=n.getContext("2d");o.clearRect(0,0,n.width,n.height),o.drawImage(i,t.left,t.top,t.width,t.height,0,0,t.width,t.height)}},update:function(){this.$emit("change",this.getResult())},onChangeCoordinates:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.coordinates=t,this.$listeners&&this.$listeners.change&&(e&&this.debounce?this.debouncedUpdate():this.update())},onChangeImage:function(){var t=this;this.imageLoaded=!1,this.delayedTransforms=null,this.imageAttributes.src=null,this.src?(I(this.src)&&this.canvas&&(this.imageAttributes.crossOrigin=this.crossOrigin),setTimeout((function(){var e=t.src;t.checkOrientation?Ht(e).then(t.onParseImage):t.onParseImage({source:e})}),this.transitionTime)):this.clearImage()},onFailLoadImage:function(){this.clearImage(),this.$emit("error")},onSuccessLoadImage:function(){var t=this;this.$refs.image&&!this.imageLoaded&&(this.imageLoaded=!0,this.visibleArea={},this.refresh().then((function(){t.resetCoordinates(),t.$emit("ready")})))},onParseImage:function(t){var e=this,i=t.source,n=t.arrayBuffer,o=t.orientation;this.imageAttributes.src=n&&o&&H(i)?qt(n):i,this.basicImageTransforms=Ft(o),this.$nextTick((function(){var t=e.$refs.image;t&&t.complete&&(Z(t)?e.onSuccessLoadImage():e.onFailLoadImage())}))},onMove:function(t){this.onChangeCoordinates(this.moveAlgorithm(S(S({},this.getPublicProperties()),{},{event:this.normalizeEvent(t)})))},onResize:function(t){var e=Math.max,i=this.sizeRestrictions,n=Math.min(this.coordinates.width,this.coordinates.height,20*this.coefficient);this.onChangeCoordinates(this.resizeAlgorithm(S(S({},this.getPublicProperties()),{},{sizeRestrictions:S(S({},i),{},{minWidth:e(i.minWidth,n),minHeight:e(i.minHeight,n)}),event:this.normalizeEvent(t)})))},onManipulateImage:function(t){var e=yt(S(S({},this.getPublicProperties()),{},{event:this.normalizeEvent(t),settings:{frozenDirections:this.frozenDirections,imageRestriction:this.imageRestriction,resizeStencil:this.settings.resize.stencil}})),i=e.visibleArea,n=e.coordinates;this.visibleArea=i,this.onChangeCoordinates(n)},onPropsChange:function(){this.applyTransforms(this.coordinates,!0)},applyTransforms:function(t){var e=this,i=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.positionRestrictions,o=function(t,i){return e.moveAlgorithm({coordinates:t,positionRestrictions:n,event:new Q(null,{left:i.left-t.left,top:i.top-t.top})})},r=function(t,i){var n=S(S(S({},t),St({width:i.width,height:i.height,sizeRestrictions:e.sizeRestrictions,aspectRatio:e.getAspectRatio()})),{},{left:0,top:0});return o(n,{left:t.left,top:t.top})},s=this.coordinates;return Array.isArray(t)||(t=[t]),t.forEach((function(t){var i={};i="function"==typeof t?t(S({},s),e.imageSize):t,N(i.width)&&N(i.height)||(s=r(s,S(S({},s),i))),N(i.left)&&N(i.top)||(s=o(s,S(S({},s),i)))})),i&&this.autoZoom(s),this.onChangeCoordinates(s,!1),s},resetCoordinates:function(){var t=this;if(this.$refs.image){var e=this.$refs.cropper,i=this.$refs.image,n=this.sizeRestrictions,o=(n.minWidth,n.minHeight,n.maxWidth,n.maxHeight,n.widthFrozen),r=n.heightFrozen;this.frozenDirections.width=!!o,this.frozenDirections.height=!!r;var s=this.defaultSize(S({boundaries:this.boundaries,visibleArea:this.visibleArea,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,cropper:e,image:i,imageWidth:this.imageSize.width,imageHeight:this.imageSize.height,props:this.$props},this.sizeRestrictions)),a=[s,function(n){return S({},t.defaultPosition({coordinates:n,visibleArea:t.visibleArea,imageSize:t.imageSize,cropper:e,image:i,stencilWidth:n.width,stencilHeight:n.height,imageWidth:t.imageSize.width,imageHeight:t.imageSize.height,props:t.$props}))}];this.delayedTransforms&&a.push.apply(a,x(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.applyTransforms(a),this.delayedTransforms=null}},clearImage:function(){var t=this,e=this.$refs.stretcher;this.imageLoaded=!1,setTimeout((function(){e.style.height="auto",e.style.width="auto",t.coordinates=S({},F),t.boundaries={width:0,height:0}}),this.transitionTime)},getPositionRestrictions:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return t?Ot(this.positionRestrictions,this.visibleArea):this.positionRestrictions},refresh:function(){var t=this;return new Promise((function(e,i){var n=t.$refs.image,o=t.$refs.cropper;if(t.src&&n){var r=t.$refs.stretcher;t.imageTransforms.flipped?(t.imageSize.height=n.naturalWidth,t.imageSize.width=n.naturalHeight):(t.imageSize.height=n.naturalHeight,t.imageSize.width=n.naturalWidth),t.initStretcher({cropper:o,stretcher:r,imageSize:t.imageSize}),t.$nextTick((function(){t.boundaries=t.defaultBoundaries({cropper:o,imageSize:t.imageSize});var i=t.defaultVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries}),n=t.updateVisibleArea({current:Pt({visibleArea:i,boundaries:t.boundaries}),previous:t.visibleArea,areaRestrictions:t.areaRestrictions,coordinates:t.coordinates,boundaries:t.boundaries,imageSize:t.imageSize}),r=t.fitCoordinates({visibleArea:n,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.calculateSizeRestrictions({visibleArea:n})});t.visibleArea=n,t.coordinates=r,e()}))}else i()}))},getAspectRatio:function(){return this.$refs.stencil.aspectRatios?this.$refs.stencil.aspectRatios():{minimum:this.stencilProps.aspectRatio||this.stencilProps.minAspectRatio,maximum:this.stencilProps.aspectRatio||this.stencilProps.maxAspectRatio}},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,areaRestrictions:this.areaRestrictions,frozenDirections:this.frozenDirections,aspectRatio:this.getAspectRatio()}},calculatePositionRestrictions:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.visibleArea||this.visibleArea;return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:e})},calculateSizeRestrictions:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.visibleArea||this.visibleArea,i=(this.restrictions||this.sizeRestrictionsAlgorithm)({imageSize:this.imageSize,minWidth:N(this.minWidth)?0:q(this.minWidth),minHeight:N(this.minHeight)?0:q(this.minHeight),maxWidth:N(this.maxWidth)?1/0:q(this.maxWidth),maxHeight:N(this.maxHeight)?1/0:q(this.maxHeight),imageWidth:this.imageSize.width,imageHeight:this.imageSize.height,props:this.$props});return Bt({visibleArea:e,sizeRestrictions:i,positionRestrictions:this.positionRestrictions,imageSize:this.imageSize,imageRestriction:this.imageRestriction})}}},tn=Qi,en=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cropper",class:t.classes.cropper},[i("div",{class:t.classes.background,style:t.areaStyle}),t._v(" "),i("div",{ref:"stretcher",class:t.classes.stretcher}),t._v(" "),i("div",{ref:"area",class:t.classes.area,style:t.areaStyle},[i("cropper-wrapper",{class:t.classes.cropperWrapper,attrs:{"wheel-resize":t.settings.wheelResize,"touch-resize":t.settings.touchResize,"touch-move":t.settings.touchMove,"mouse-move":t.settings.touchMove},on:{move:t.onManipulateImage,resize:t.onManipulateImage}},[i("div",{class:t.classes.imageWrapper},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{crossorigin:t.imageAttributes.crossOrigin,src:t.imageAttributes.src},on:{mousedown:function(t){t.preventDefault()}}})]),t._v(" "),i(t.stencilComponent,t._b({ref:"stencil",tag:"component",attrs:{img:{src:t.imageAttributes.src,size:t.imageSize,transforms:t.imageTransforms,coefficient:t.coefficient},"result-coordinates":t.coordinates,"stencil-coordinates":t.stencilCoordinates},on:{resize:t.onResize,move:t.onMove}},"component",t.stencilProps,!1)),t._v(" "),t.canvas?i("canvas",{ref:"canvas",style:{display:"none"}}):t._e(),t._v(" "),t.canvas?i("canvas",{ref:"sourceCanvas",style:{display:"none"}}):t._e()],1)],1)])},nn=[],on=void 0,rn=void 0,sn=void 0,an=!1,cn=Zt({render:en,staticRenderFns:nn},on,tn,rn,an,sn,!1,void 0,void 0,void 0),ln=M("vue-preview-image"),hn={name:"PreviewImage",props:{img:{type:String},imageClass:{type:String},width:{type:Number},height:{type:Number},top:{type:Number},left:{type:Number},previewWidth:{type:Number,required:!0},previewHeight:{type:Number,required:!0}},data:function(){return{imageSize:{width:0,height:0}}},computed:{classes:function(){return{root:ln(),image:A(ln("image"),this.imageClass)}},wrapperStyle:function(){return{width:"".concat(this.previewWidth,"px"),height:"".concat(this.previewHeight,"px")}},imageStyle:function(){var t=this.previewHeight/this.height;return{width:"".concat(this.imageSize.width*t,"px"),height:"".concat(this.imageSize.height*t,"px"),left:"".concat(-this.left*t,"px"),top:"".concat(-this.top*t,"px")}}},watch:{img:function(){this.onChangeImage()}},mounted:function(){this.onChangeImage()},methods:{refreshImage:function(){var t=this.$refs.image;this.imageSize.height=t.naturalHeight,this.imageSize.width=t.naturalWidth},onChangeImage:function(){var t=this,e=this.$refs.image;e.complete?this.refreshImage():e.addEventListener("load",(function(){t.refreshImage()}))}}},un=hn,dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root,style:t.wrapperStyle},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.img}})])},fn=[],pn=void 0,mn=void 0,gn=void 0,vn=!1;Zt({render:dn,staticRenderFns:fn},pn,un,mn,vn,gn,!1,void 0,void 0,void 0);function wn(t,e){if(e&&"undefined"!==typeof document){for(var i,n=document.head||document.getElementsByTagName("head")[0],o=n.getElementsByTagName("style"),r=0;r<o.length;r++)o[r]&&o[r].innerText&&o[r].innerText.startsWith("/*for="+t)&&(i=o[r]);if(i||(i=document.createElement("style"),i.type="text/css",n.insertBefore(i,o[0]||n.firstChild)),i.styleSheet)i.styleSheet.cssText=e;else{var s=document.createTextNode("/*for="+t+"*/"+e);i.innerHTML="",i.appendChild(s)}}}p["default"].component("cropper",cn),p["default"].component("rectangle-stencil",Hi),p["default"].component("circle-stencil",Ji),p["default"].component("simple-handler",Te),p["default"].component("simple-line",Mi),wn("vue-advanced-cropper",".vue-advanced-cropper{text-align:center;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-height:100%;max-width:100%;direction:ltr}.vue-advanced-cropper__stretcher{pointer-events:none;position:relative;max-width:100%;max-height:100%}.vue-advanced-cropper__image{opacity:.5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;-webkit-transform-origin:center;transform-origin:center;max-width:unset!important}.vue-advanced-cropper__area{position:absolute;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);top:50%}.vue-advanced-cropper__background{position:absolute;background:#000;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-advanced-cropper__cropper-wrapper{width:100%;height:100%}.vue-advanced-cropper__image-wrapper{overflow:hidden;position:absolute;width:100%;height:100%}.vue-advanced-cropper__stencil-wrapper{position:absolute}.vue-simple-line{background:0 0;-webkit-transition:border .5s;transition:border .5s;border-color:rgba(255,255,255,.3);border-width:0;border-style:solid}.vue-simple-line--north,.vue-simple-line--south{height:0;width:100%}.vue-simple-line--east,.vue-simple-line--west{height:100%;width:0}.vue-simple-line--east{border-right-width:1px}.vue-simple-line--west{border-left-width:1px}.vue-simple-line--south{border-top-width:1px}.vue-simple-line--north{border-bottom-width:1px}.vue-simple-line--hover{opacity:1;border-color:#fff}.vue-square-handler{display:block;background:#fff;height:10px;width:10px}.vue-handler-wrapper{position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-handler-wrapper__draggable{width:30px;height:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vue-handler-wrapper--west-north{left:0;top:0;cursor:nw-resize}.vue-handler-wrapper--north{left:50%;top:0;cursor:n-resize}.vue-handler-wrapper--east-north{left:100%;top:0;cursor:ne-resize}.vue-handler-wrapper--east{left:100%;top:50%;cursor:e-resize}.vue-handler-wrapper--east-south{left:100%;top:100%;cursor:se-resize}.vue-handler-wrapper--south{left:50%;top:100%;cursor:s-resize}.vue-handler-wrapper--west-south{left:0;top:100%;cursor:sw-resize}.vue-handler-wrapper--west{left:0;top:50%;cursor:w-resize}.vue-handler-wrapper--disabled{cursor:auto}.vue-preview-image{overflow:hidden;position:relative}.vue-preview-image__image{pointer-events:none;position:absolute;max-width:unset!important}.vue-bounding-box{position:relative;height:100%;width:100%}.vue-draggable-area{position:relative}.vue-preview-result{overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;height:100%;width:100%}.vue-preview-result__wrapper{position:absolute}.vue-preview-result__image{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform-origin:center;transform-origin:center;max-width:unset!important}.vue-line-wrapper{background:0 0;position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vue-line-wrapper--north,.vue-line-wrapper--south{height:12px;width:100%;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-line-wrapper--north{top:0;cursor:n-resize}.vue-line-wrapper--south{top:100%;cursor:s-resize}.vue-line-wrapper--east,.vue-line-wrapper--west{width:12px;height:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0}.vue-line-wrapper--east{left:100%;cursor:e-resize}.vue-line-wrapper--west{left:0;cursor:w-resize}.vue-line-wrapper--disabled{cursor:auto}.vue-rectangle-stencil{position:absolute;height:100%;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.vue-rectangle-stencil--movable{cursor:move}.vue-circle-stencil{position:absolute;height:100%;width:100%;-webkit-box-sizing:content-box;box-sizing:content-box;cursor:move}.vue-circle-stencil__preview{border-radius:50%}");i("2c7e");var bn=i("7f75"),yn=i.n(bn),Sn=(i("b3a4"),i("7532")),xn={name:"AvatarHome",components:{[c.a.name]:c.a,[s.a.name]:s.a,VSwatches:yn.a,Cropper:cn},data(){return{image:null,logo:u.a,user:this.ctx.user,width:414,currentWork:null,variables:[],viewport:{width:120,height:120},recents:[]}},computed:{userAvatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,960,960):""}},created(){this.workdao=new l["a"](this.ctx,"danke/work"),this.imagedao=new f["a"](this.ctx),this.styleRegistry=new Sn["a"](this.ctx)},mounted(){this.loadWorks(),this.width=window.screen.availWidth,this.viewport={width:(this.width-40)/3-10,height:(this.width-40)/3-10}},methods:{getImageUrl:d["a"],uploadImage(t){const e=t.target;if(e.files&&e.files[0]){const t=new FileReader;t.onload=t=>{this.image=t.target.result},t.readAsDataURL(e.files[0])}},uploadTempAvatar(){const{canvas:t}=this.$refs.cropper.getResult();if(t){new FormData;t.toBlob(async t=>{const e=await this.imagedao.uploadBlob(t,"profile");await this.ctx.userdao.setAvatar(e.name);const i=await this.ctx.userdao.getCurrentUser();this.ctx.user=i,this.user=i,this.image=null})}},async requestDownload(){window.open(`http://www.danke.fun/api/danke/image/merge?top=${this.getImageUrl(this.currentWork.snapshot,480,480)}&bottom=${this.getImageUrl(this.user.avatar,480,480)}&width=480&height=480`)},downloadFile(t){var e=document.createElement("a");e.href=t,e.download=!0,e.click()},applyDecorator(t){this.currentWork=JSON.parse(JSON.stringify(t)),this.variables=[];for(let e of this.currentWork.scenes[0].elements)if(e.template)if(e.url)this.variables.push({element:e.id,type:"image",value:this.userAvatar});else if(e.text)this.variables.push({element:e.id,type:"text",value:e.text});else if(e.html)for(let t of e.variables)this.variables.push({variable:!0,element:e.id,name:t.name,type:t.type,value:t.value})},async loadWorks(){const t=await this.workdao.list(Object.assign({"system.app":"avatar",page:this.page,count:this.count}));this.recents=t.list},async avatarChosen(t,e){const i=await this.imagedao.uploadBlob(t.raw,"profile");await this.ctx.userdao.setAvatar(i.name);const n=await this.ctx.userdao.getCurrentUser();this.ctx.user=n,this.user=n}}},Cn=xn,_n=(i("8aaa"),i("2877")),zn=Object(_n["a"])(Cn,n,o,!1,null,null,null);e["default"]=zn.exports},eedf:function(t,e,i){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=97)}({0:function(t,e,i){"use strict";function n(t,e,i,n,o,r,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(t,e){return c.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i.d(e,"a",(function(){return n}))},97:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?i("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?i("i",{class:t.icon}):t._e(),t.$slots.default?i("span",[t._t("default")],2):t._e()])},o=[];n._withStripped=!0;var r={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},s=r,a=i(0),c=Object(a["a"])(s,n,o,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var l=c.exports;l.install=function(t){t.component(l.name,l)};e["default"]=l}})},f0d9:function(t,e,i){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},f6e0:function(t,e,i){}}]);