(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["site"],{"4c0f":function(t,e,a){"use strict";var i=a("ba43"),s=a.n(i);s.a},"5f11":function(t,e,a){"use strict";var i=a("f53d"),s=a.n(i);s.a},9241:function(t,e,a){"use strict";var i=a("d6c2"),s=a.n(i);s.a},"9ac0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"site"}},[a("nav-bar"),t.loading?a("div",{staticClass:"main-full loading"},[a("ol",{staticClass:"shots-grid container-fluid"},t._l(24,(function(t){return a("li",{key:t,staticClass:"work-loading",style:{height:"240px"}})})),0)]):t._e(),a("div",{staticClass:"main-full"},[a("ol",{staticClass:"shots-grid container-fluid"},t._l(t.works,(function(e){return a("li",{key:e._id},[a("div",{staticClass:"scene-wrapper",style:{width:t.workViewPort.width+"px",height:t.workViewPort.height+"px",background:e.color},on:{click:function(a){return t.openWork(e)}}},[a("render-scene",{attrs:{"view-box":e.viewBox||e.screen,scene:e.scenes[0],"view-port":e.viewport,stage:e.stage}})],1),a("div",{staticClass:"author-likes"},[e.avatar?a("img",{staticClass:"avatar",attrs:{src:t.getImageUrl(e.avatar,24,24)}}):t._e(),a("div",{staticClass:"author"},[t._v(" "+t._s(e.author)+" ")])])])})),0)]),a("nav-footer")],1)},s=[],r=a("9f91"),n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-4"},[a("div",{staticClass:"bd-footer-tsp"},[t._v(" Source code licensed "),a("a",{attrs:{href:"https://opensource.org/licenses/mit-license.php"}},[t._v("MIT")]),t._v(". ")]),a("div",[t._v(" 网站备案号"),a("a",{attrs:{href:"http://www.beian.miit.gov.cn"}},[t._v(" 京ICP备14044474号-3")]),t._v(" | 蛋壳分享 ")]),a("div",[t._v(" © 2018-2020 DANKE.FUN ")])])])])])}],c={name:"NavFooter"},h=c,d=(a("4c0f"),a("2877")),l=Object(d["a"])(h,n,o,!1,null,null,null),u=l.exports,v=a("8b3e"),w=a("b812"),p=a("47c2"),g={name:"Main",components:{RenderScene:v["a"],NavFooter:u,NavBar:r["a"]},mixins:[w["a"]],data(){return{workViewPort:{width:100,height:100}}},created(){},mounted(){this.initWorkViewPort(),this.loadWorks()},methods:{viewport(){return this.workViewPort},listQuery(){return{"system.site":"on"}},avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"},getImageUrl:p["a"],openWork(t){window.open("/slide/"+t.id)},initWorkViewPort(){const t=document.querySelector(".work-loading");this.workViewPort={width:t.getBoundingClientRect().width,height:t.getBoundingClientRect().width/4*3}}}},f=g,m=(a("9241"),Object(d["a"])(f,i,s,!1,null,null,null));e["default"]=m.exports},"9f91":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-wrapper",attrs:{id:"header",role:"navigation","aria-label":"main navigation"}},[a("div",{staticClass:"container"},[t._m(0),t._m(1),a("div",{staticClass:"navbar-end"},[t.logon?t._e():a("div",{staticClass:"navbar-item"},[a("router-link",{staticClass:"button is-light",attrs:{to:"/login"}},[t._v("登录")]),a("router-link",{staticClass:"button form-sub",attrs:{to:"/register"}},[t._v("注册")])],1),t.logon?a("router-link",{staticClass:"navbar-item",attrs:{tag:"div",to:"/creative/my"}},[a("img",{staticClass:"avatar",attrs:{src:t.avatar}})]):t._e()],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-logo",attrs:{id:"logo"}},[a("a",{staticClass:"navbar-item",attrs:{href:"/"}},[t._v("danke.fun")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar-menu"},[a("a",{staticClass:"navbar-item",attrs:{href:"/"}},[t._v("首页")])])}],r=a("bd37"),n=a("47c2"),o={name:"NavBar",props:{},data(){return{user:this.ctx.user,isMobileOpened:!1}},computed:{burgerOpen(){return this.isMobileOpened?"is-active":""},logon(){return this.user.id},avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"}},created(){this.ctx.on&&this.ctx.on("user-updated",t=>{this.user=t})},mounted(){this.$router.beforeEach((t,e,a)=>{this.isMobileOpened=!1,a()})},methods:{getImageUrl:n["a"],logout(){this.ctx.token=Object(r["b"])(),this.ctx.user=null,this.ctx.emit("user-updated",null),this.$router.push("/")},toggleOpen(){this.isMobileOpened=!this.isMobileOpened},getStarted(){this.$router.push("/user")},goUserHome(){this.$router.push("/user")}}},c=o,h=(a("5f11"),a("2877")),d=Object(h["a"])(c,i,s,!1,null,null,null);e["a"]=d.exports},b5f7:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));class i{constructor(t,e){this.ctx=t,this.path=e}serialize(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&t[a]&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")}async getOne(t){const e=await this.ctx.get(`${this.path}/${t}`);return e.data.data}async list(t){const e=await this.ctx.get(`${this.path}?${this.serialize(t)}`);return e.data.data}async multiGet(t){const e=await this.ctx.post(this.path+"/id",{ids:t});return e.data.data}async update(t){return t._id&&await this.delete(t),delete t._id,this.create(t)}async createOrPatch(t){return t._id?this.patch(t._id,t):(delete t._id,this.create(t))}async create(t){const e=await this.ctx.post(""+this.path,t);return e.data.data}async regex(t,e,a){const i=await this.ctx.get(`${this.path}/regex/${t}/${e}?limit=${a||1e3}`);return i.data.data}async patch(t,e){const a=await this.ctx.patch(`${this.path}/${t}`,e);return a.data.data}async delete(t){if("string"===typeof t){const e=await this.ctx.delete(`${this.path}/${t}`);return e.data.data}{const e=await this.ctx.delete(`${this.path}/${t._id}`);return e.data.data}}async distinct(t,e){const a=await this.ctx.post(`${this.path}/distinct/${t}`,e);return a.data.data}}},b812:function(t,e,a){"use strict";var i=a("b5f7"),s=a("7532");a("2c7e");e["a"]={data(){return{loading:!0,page:1,count:24,total:0,works:[]}},created(){this.workdao=new i["a"](this.ctx,"danke/work"),this.svgdao=new i["a"](this.ctx,"danke/svg"),this.ctx.styleRegistry=new s["a"]},methods:{listQuery(){return{creator:this.ctx.user.id}},viewport(){return{width:200,height:200}},horizontalViewPort(t){return{height:200,width:200/t.viewBox.height*t.viewBox.width}},horizontalViewPortStyle(t){return{height:"200px",width:200/t.viewBox.height*t.viewBox.width+"px"}},verticalViewPort(t){return{height:360,width:360/t.viewBox.height*t.viewBox.width}},verticalViewPortStyle(t){return{height:"360px",width:360/t.viewBox.height*t.viewBox.width+"px"}},async loadWorks(){const t=await this.workdao.list(Object.assign({projection:"updated,created,creator,name,id,frames,viewBox,title,author,avatar,color,snapshot",page:this.page,count:this.count},this.listQuery()));this.works=t.list,this.total=t.total,this.loading=!1}}}},ba43:function(t,e,a){},d6c2:function(t,e,a){},f53d:function(t,e,a){}}]);