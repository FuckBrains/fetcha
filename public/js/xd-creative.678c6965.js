(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["xd-creative"],{"06f1":function(t,e,n){},"0fb7":function(t,e,n){},"17ed2":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"creative-center"},[n("div",{staticClass:"main"},[n("div",{staticClass:"nav"},[n("div",{staticClass:"me"},[n("div",{staticClass:"avatar"},[n("el-upload",{ref:"imageUpload",staticClass:"upload-container",attrs:{"auto-upload":!1,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-change":t.avatarChosen}},[n("img",{attrs:{src:t.avatar}})])],1),n("div",{staticClass:"user"},[n("div",{staticClass:"user-name"},[t._v(" "+t._s(t.user.nick||t.user.id)+" ")]),n("div",{staticClass:"location"},[t._v(" "+t._s(t.user.location||"火星")+" ")])])]),n("button",{staticClass:"button",attrs:{slot:"reference"},on:{click:function(e){return t.navTo("new")}},slot:"reference"},[t._v("创建新的作品")]),n("div",{staticClass:"menu"},[n("div",{staticClass:"node",class:"my"===t.nav?"selected":"",on:{click:function(e){return t.navTo("my")}}},[n("span",[t._v("我的作品")])]),n("div",{staticClass:"node tree-node",class:"profile"===t.nav?"selected":"",on:{click:function(e){return t.navTo("profile")}}},[n("span",[t._v("设置")])])])]),n("div",{staticClass:"content"},[n("router-view")],1)])])},s=[],r=(n("f225"),n("450d"),n("89a9")),o=n.n(r),a=(n("06f1"),n("6ac9")),u=n.n(a),c=n("7532"),l=n("d05f"),h=n("47c2"),d={name:"CreativeCenter",components:{[u.a.name]:u.a,[o.a.name]:o.a},filters:{},data(){return{user:this.ctx.user,lines:[]}},computed:{avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"},nav(){const t=this.$route.path;return t.substring(t.lastIndexOf("/")+1)}},created(){this.imagedao=new l["a"](this.ctx)},mounted(){this.ctx.styleRegistry=new c["a"]},methods:{getImageUrl:h["a"],navTo(t){this.$router.replace("/creative/"+t)},xd({width:t,height:e}){window.open(`/xd?width=${t}&height=${e}`)},async avatarChosen(t,e){const n=await this.imagedao.uploadBlob(t.raw,"profile");await this.ctx.userdao.setAvatar(n.name);const i=await this.ctx.userdao.getCurrentUser();this.ctx.user=i,this.user=i},playWork(t){window.open("/play/fit/"+t._id)},chooseDraftWork(t){this.$router.push(this.xdUrl+"?&work="+t._id+"&ratio="+t.ratio)},async deleteWorkDraft(t){await MessageBox.confirm("确认删除此作品","注意"),await this.workdao.delete(t),this.works=[],this.loadMyWorks()},goShareLink(t){this.$router.push("/shared/"+t._id)}}},f=d,p=(n("ba11"),n("2877")),m=Object(p["a"])(f,i,s,!1,null,null,null);e["default"]=m.exports},"2a3a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-works body"},[n("div",{staticClass:"content-title"},[t._v("我的作品")]),n("div",{ref:"myWorkList",staticClass:"my-work-list"},t._l(t.works,(function(e){return n("div",{key:e.id,staticClass:"work"},[n("div",{staticClass:"preview"},[n("div",{staticClass:"work-image-container",style:t.containerFitSize(e)},[e.snapshot?n("img",{attrs:{src:t.getImageUrl(e.snapshot,154,96,"lfit")}}):t._e()]),e.snapshot?t._e():n("span",{staticClass:"no-snapshot"},[t._v("正在生成预览")])]),n("div",{staticClass:"details"},[n("div",{staticClass:"work-title"},[t._v(" "+t._s(e.title)+" ")]),n("div",{staticClass:"work-modified"},[t._v(" 更新： "+t._s(t.formatTime(e.updated,"YYYY-M-DD HH:mm"))+" ")])]),n("div",{staticClass:"actions"},[n("div",{staticClass:"btns"},[n("button",{on:{click:function(n){return t.removeWork(e)}}},[n("i",{staticClass:"el-icon-delete"}),t._v("删除")]),n("button",{on:{click:function(n){return t.editWork(e)}}},[n("i",{staticClass:"el-icon-edit"}),t._v("编辑")])])])])})),0),t.loading||0!==t.works.length?t._e():n("div",{staticClass:"empty"},[n("div",{staticClass:"msg"},[t._v("还没有任何作品")]),n("div",{staticClass:"desc"},[t._v("期待您的创作，快速开始去模板中心看看")])]),t.loading?n("div",{staticClass:"empty"},[n("div",{staticClass:"msg"},[t._v("作品获取中")]),n("div",{staticClass:"desc"},[t._v("请稍候")])]):t._e()])},s=[],r=n("b812"),o=n("5a0c"),a=n.n(o),u=n("2c7e"),c=n("47c2"),l={name:"MyWork",components:{},mixins:[r["a"]],data(){return{}},computed:{horizontalWorks(){return this.works.filter(t=>t.viewBox&&t.viewBox.width>=t.viewBox.height)},verticalWorks(){return this.works.filter(t=>t.viewBox&&t.viewBox.height>t.viewBox.width)}},created(){},mounted(){this.loadWorks()},methods:{getImageUrl:c["a"],containerFitSize(t){const e=Object(u["a"])(t.viewBox,{width:154,height:96});return{width:e.width+"px",height:e.height+"px"}},formatTime(t,e){return a()(t).format(e)},viewport(){return{width:200,height:200}},listQuery(){return{creator:this.ctx.user.id,isBlock:"no"}},previewWork(t){window.open("/slide/"+t.id)},replayWork(t){t.stage="exist",setTimeout(()=>{t.stage="enter"},100)},editWork(t){window.open("/xd?work="+t.id)},async removeWork(t){confirm("确认删除作品?")&&(await this.workdao.delete(t),this.loadWorks())}}},h=l,d=(n("581b"),n("2877")),f=Object(d["a"])(h,i,s,!1,null,null,null);e["default"]=f.exports},"2c7e":function(t,e,n){"use strict";function i(t,e){if(t.width<e.width&&t.height<e.height)return t;var n=t.width/t.height,i=e.width/e.height,s={};return n>i?(s.fitTo="width",s.width=e.width,s.height=Math.floor(t.height*(e.width/t.width))):(s.fitTo="height",s.width=Math.floor(t.width*(e.height/t.height)),s.height=e.height),s}function s(t,e,n,i=""){let s=null;return s=e&&n?{left:t.x*n.width/e.width+"px",top:t.y*n.height/e.height+"px",width:t.width*n.width/e.width+"px",height:t.height*n.height/e.height+"px"}:{left:t.x+"px",top:t.y+"px",width:t.width+"px",height:t.height+"px"},s}function r(t,e,n=0){return t.x-e.x<e.width+n&&t.x-e.x>-n&&t.y-e.y<e.height+n&&t.y-e.y>-n}function o(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return o}))},"3bba":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user-profile"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.updateUserProfile(e)}}},[n("fieldset",[n("label",[t._v("用户账号")]),n("span",[t._v(t._s(t.user.id))])]),n("fieldset",[n("label",[t._v("用户名")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.nick,expression:"user.nick"}],attrs:{type:"text"},domProps:{value:t.user.nick},on:{input:function(e){e.target.composing||t.$set(t.user,"nick",e.target.value)}}})])]),n("fieldset",[n("label",[t._v("位置")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.location,expression:"user.location"}],attrs:{type:"text"},domProps:{value:t.user.location},on:{input:function(e){e.target.composing||t.$set(t.user,"location",e.target.value)}}})])]),n("fieldset",[n("label",[t._v("电子邮件")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})])]),n("fieldset",[n("button",{attrs:{type:"submit"}},[t._v("保存")]),n("button",{staticClass:"danger",attrs:{type:"button"},on:{click:t.logout}},[t._v("退出登录")])])])])},s=[],r=(n("0fb7"),n("450d"),n("f529")),o=n.n(r),a=(n("f225"),n("89a9")),u=n.n(a),c=n("d05f"),l=n("47c2"),h={name:"UserHome",components:{[u.a.name]:u.a},data(){return{user:this.ctx.user}},computed:{avatar(){return this.user&&this.user.avatar?this.getImageUrl(this.user.avatar,96,96):"http://cdn.danke.fun/res/head.svg"}},created(){this.imagedao=new c["a"](this.ctx)},methods:{getImageUrl:l["a"],async avatarChosen(t,e){const n=await this.imagedao.uploadBlob(t.raw,"profile");await this.ctx.userdao.setAvatar(n.name);const i=await this.ctx.userdao.getCurrentUser();this.ctx.user=i,this.user=i},async logout(){await this.ctx.userdao.logout(),this.ctx.user={},this.$router.replace("/")},async updateUserProfile(){await this.ctx.userdao.setUserProfile({email:this.user.email,nick:this.user.nick,location:this.user.location});const t=await this.ctx.userdao.getCurrentUser();this.ctx.user=t,this.user=t,o.a.success({message:"用户状态更新成功"})}}},d=h,f=(n("521a"),n("2877")),p=Object(f["a"])(d,i,s,!1,null,null,null);e["default"]=p.exports},"41f8":function(t,e,n){"use strict";e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isVNode=r;var s=n("8122");function r(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":i(t))&&(0,s.hasOwn)(t,"componentOptions")}},"47c2":function(t,e,n){"use strict";function i(t,e,n,i="mfit"){return t?!t.endsWith(".svg")&&e&&n?this.ctx.IMG_SERVER+"/"+t+`?x-oss-process=image/format,png/quality,Q_80/resize,m_${i},h_${Math.floor(n)||100},w_${Math.floor(e)||100}`:this.ctx.IMG_SERVER+"/"+t:null}n.d(e,"a",(function(){return i}))},"47c2d":function(t,e,n){},"4e4d":function(t,e,n){},"521a":function(t,e,n){"use strict";var i=n("d84e"),s=n.n(i);s.a},"581b":function(t,e,n){"use strict";var i=n("47c2d"),s=n.n(i);s.a},"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t="millisecond",e="second",n="minute",i="hour",s="day",r="week",o="month",a="quarter",u="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},f={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(s,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),s=e.clone().add(i,o),r=n-s<0,a=e.clone().add(i+(r?-1:1),o);return+(-(i+(n-s)/(r?s-a:a-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:o,y:u,w:r,d:s,D:c,h:i,m:n,s:e,ms:t,Q:a}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m="en",v={};v[m]=p;var g=function(t){return t instanceof _},w=function(t,e,n){var i;if(!t)return m;if("string"==typeof t)v[t]&&(i=t),e&&(v[t]=e,i=t);else{var s=t.name;v[s]=t,i=s}return!n&&i&&(m=i),i||!n&&m},y=function(t,e){if(g(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=f;b.l=w,b.i=g,b.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var _=function(){function d(t){this.$L=this.$L||w(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(l);if(i){var s=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=y(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return y(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<y(t)},f.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,a){var l=this,h=!!b.u(a)||a,d=b.p(t),f=function(t,e){var n=b.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return h?n:n.endOf(s)},p=function(t,e){return b.w(l.toDate()[t].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},m=this.$W,v=this.$M,g=this.$D,w="set"+(this.$u?"UTC":"");switch(d){case u:return h?f(1,0):f(31,11);case o:return h?f(1,v):f(0,v+1);case r:var y=this.$locale().weekStart||0,_=(m<y?m+7:m)-y;return f(h?g-_:g+(6-_),v);case s:case c:return p(w+"Hours",0);case i:return p(w+"Minutes",1);case n:return p(w+"Seconds",2);case e:return p(w+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(r,a){var l,h=b.p(r),d="set"+(this.$u?"UTC":""),f=(l={},l[s]=d+"Date",l[c]=d+"Date",l[o]=d+"Month",l[u]=d+"FullYear",l[i]=d+"Hours",l[n]=d+"Minutes",l[e]=d+"Seconds",l[t]=d+"Milliseconds",l)[h],p=h===s?this.$D+(a-this.$W):a;if(h===o||h===u){var m=this.clone().set(c,1);m.$d[f](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[b.p(t)]()},f.add=function(t,a){var c,l=this;t=Number(t);var h=b.p(a),d=function(e){var n=y(l);return b.w(n.date(n.date()+Math.round(e*t)),l)};if(h===o)return this.set(o,this.$M+t);if(h===u)return this.set(u,this.$y+t);if(h===s)return d(1);if(h===r)return d(7);var f=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[h]||1,p=this.$d.getTime()+t*f;return b.w(p,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),s=this.$locale(),r=this.$H,o=this.$m,a=this.$M,u=s.weekdays,c=s.months,l=function(t,i,s,r){return t&&(t[i]||t(e,n))||s[i].substr(0,r)},d=function(t){return b.s(r%12||12,t,"0")},f=s.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:b.s(a+1,2,"0"),MMM:l(s.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:l(s.weekdaysMin,this.$W,u,2),ddd:l(s.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:b.s(r,2,"0"),h:d(1),hh:d(2),a:f(r,o,!0),A:f(r,o,!1),m:String(o),mm:b.s(o,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,c,l){var h,d=b.p(c),f=y(t),p=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,v=b.m(this,f);return v=(h={},h[u]=v/12,h[o]=v,h[a]=v/3,h[r]=(m-p)/6048e5,h[s]=(m-p)/864e5,h[i]=m/36e5,h[n]=m/6e4,h[e]=m/1e3,h)[d]||m,l?v:b.a(v)},f.daysInMonth=function(){return this.endOf(o).$D},f.$locale=function(){return v[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=w(t,e,!0);return i&&(n.$L=i),n},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),x=_.prototype;return y.prototype=x,[["$ms",t],["$s",e],["$m",n],["$H",i],["$W",s],["$M",o],["$y",u],["$D",c]].forEach((function(t){x[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),y.extend=function(t,e){return t(e,_,y),y},y.locale=w,y.isDayjs=g,y.unix=function(t){return y(1e3*t)},y.en=v[m],y.Ls=v,y}))},"6ac9":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=74)}({0:function(t,e,n){"use strict";function i(t,e,n,i,s,r,o,a){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):s&&(u=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},5:function(t,e){t.exports=n("e974")},7:function(t,e){t.exports=n("2b0e")},74:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("transition",{attrs:{name:t.transition},on:{"after-enter":t.handleAfterEnter,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&t.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[t.popperClass,t.content&&"el-popover--plain"],style:{width:t.width+"px"},attrs:{role:"tooltip",id:t.tooltipId,"aria-hidden":t.disabled||!t.showPopper?"true":"false"}},[t.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:t._s(t.title)}}):t._e(),t._t("default",[t._v(t._s(t.content))])],2)]),t._t("reference")],2)},s=[];i._withStripped=!0;var r=n(5),o=n.n(r),a=n(2),u=n(3),c={name:"ElPopover",mixins:[o.a],props:{trigger:{type:String,default:"click",validator:function(t){return["click","focus","hover","manual"].indexOf(t)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(u["generateId"])()}},watch:{showPopper:function(t){this.disabled||(t?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var t=this,e=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$slots.reference&&this.$slots.reference[0]&&(e=this.referenceElm=this.$slots.reference[0].elm),e&&(Object(a["addClass"])(e,"el-popover__reference"),e.setAttribute("aria-describedby",this.tooltipId),e.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a["on"])(e,"focusin",(function(){t.handleFocus();var n=e.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(a["on"])(n,"focusin",this.handleFocus),Object(a["on"])(e,"focusout",this.handleBlur),Object(a["on"])(n,"focusout",this.handleBlur)),Object(a["on"])(e,"keydown",this.handleKeydown),Object(a["on"])(e,"click",this.handleClick)),"click"===this.trigger?(Object(a["on"])(e,"click",this.doToggle),Object(a["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a["on"])(e,"mouseenter",this.handleMouseEnter),Object(a["on"])(n,"mouseenter",this.handleMouseEnter),Object(a["on"])(e,"mouseleave",this.handleMouseLeave),Object(a["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),e.querySelector("input, textarea")?(Object(a["on"])(e,"focusin",this.doShow),Object(a["on"])(e,"focusout",this.doClose)):(Object(a["on"])(e,"mousedown",this.doShow),Object(a["on"])(e,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(a["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var t=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){t.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(t){27===t.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var t=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){t.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(t){var e=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$slots.reference&&this.$slots.reference[0]&&(e=this.referenceElm=this.$slots.reference[0].elm),this.$el&&e&&!this.$el.contains(t.target)&&!e.contains(t.target)&&n&&!n.contains(t.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var t=this.reference;Object(a["off"])(t,"click",this.doToggle),Object(a["off"])(t,"mouseup",this.doClose),Object(a["off"])(t,"mousedown",this.doShow),Object(a["off"])(t,"focusin",this.doShow),Object(a["off"])(t,"focusout",this.doClose),Object(a["off"])(t,"mousedown",this.doShow),Object(a["off"])(t,"mouseup",this.doClose),Object(a["off"])(t,"mouseleave",this.handleMouseLeave),Object(a["off"])(t,"mouseenter",this.handleMouseEnter),Object(a["off"])(document,"click",this.handleDocumentClick)}},l=c,h=n(0),d=Object(h["a"])(l,i,s,!1,null,null,null);d.options.__file="packages/popover/src/main.vue";var f=d.exports,p=function(t,e,n){var i=e.expression?e.value:e.arg,s=n.context.$refs[i];s&&(Array.isArray(s)?s[0].$refs.reference=t:s.$refs.reference=t)},m={bind:function(t,e,n){p(t,e,n)},inserted:function(t,e,n){p(t,e,n)}},v=n(7),g=n.n(v);g.a.directive("popover",m),f.install=function(t){t.directive("popover",m),t.component(f.name,f)},f.directive=m;e["default"]=f}})},7532:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));n("b5f7");function i(t){var e=document.createElement("style");return t&&(e.id=t),e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}function s(t){var e=document.createElement("svg");return t&&(e.id=t),e.style.display="none",document.body.appendChild(e),e}function r(t,e){let n=t.length;t.insertRule(e,n)}function o(t,e,n){let i=t.length;const s="@keyframes "+e+"{"+n+"}";t.insertRule(s,i)}function a(t,e){let n=t.length;const i=`.${e.name} {\n    animation: ${e.name} ${e.duration}ms ${e.timing} both\n  }`;t.insertRule(i,n)}async function u(t,e,n){const i=new FontFace(n,`url('${e}')`);await i.load(),document.fonts.add(i)}const c=[{id:"微软雅黑",name:"系统字体"},{id:"HYLeMiaoTiJ",name:"汉仪乐喵体简",url:"/fonts/HYLeMiaoTiJ.woff"},{id:"HYZiYanHuanLeSongW",name:"汉仪字研欢乐宋",url:"/fonts/HYZiYanHuanLeSongW.woff"},{id:"ChenYanXingKai",name:"字由点字晨颜行楷",url:"/fonts/HelloFont_ID_ChenYanXingKai.woff"},{id:"ChunYiTi",name:"字由点字春意体",url:"/fonts/ChunYiTi.woff"},{id:"WenQuanYi",name:"文泉仪黑体",url:"/fonts/wqy-microhei.woff"},{id:"HanyiTianZhen",name:"汉仪天真体",url:"/fonts/HYTianZhenTi.woff"},{id:"HanyiZhangnairen",name:"汉仪张乃仁行书",url:"/fonts/HYZhangNaiRenXingShuJ.woff"},{id:"SentyCreamPuff",name:"汉仪新蒂泡芙体",url:"/fonts/SentyCreamPuff.woff"},{id:"HanyiSentyGarden",name:"汉仪新蒂花园体",url:"/fonts/HanyiSentyGarden.woff"},{id:"HYRunYuan-65J",name:"汉仪润圆简",url:"/fonts/HYRunYuan-65J.woff"},{id:"HelloFont_WenYiHei",name:"字由文艺黑",url:"/fonts/HelloFont_WenYiHei.woff"},{id:"HelloFont_ID_ShouXieTongZhenTi",name:"字由点字书写童真体",url:"https://font-public.canva.cn/YAD88jfJsos/0/HelloFont_ID_ShouXieTongZhenTi.4cd0f3e5c.f0e0481de2533d3c68f1257eececb02f.woff"}];class l{constructor(t){this.sheet=i("style-registry"),this.styles={},this.svgfilters=[],this.keyframes={},this.svgs={},this.fonts={}}clear(){this.sheet&&this.sheet.parentElement&&this.sheet.parentElement.removeChild(this.sheet),this.sheet=i("style-registry"),this.svg=s("svg-filter-registry"),this.svgfilters=[],this.styles={},this.keyframes={},this.svgs={},this.fonts={}}addVector(t){this.svgs[t._id]=t.content}getVector(t){return this.svgs[t]}async addFontFace(t){let e=t;"string"===typeof e&&(e=c.filter(e=>e.id===t)[0]),e&&e.url&&!this.fonts[e.id]&&(await u(this.sheet,e.url,e.id),this.fonts[e.id]=e.url)}addStyle(t){if(!this.styles[t.name]){this.styles[t.name]=t.cssContent;const n=t.cssContent.split("}");for(let t of n)if(t&&t.trim())try{r(this.sheet,t+"}")}catch(e){console.log("illgel css content",t)}t.svgContent&&this.svgfilters.push(t.svgContent)}}addFrames(t){for(let e in t)this.addFrame({name:e,cssFrame:t[e]})}addFrame(t){this.keyframes[t.name]||(this.keyframes[t.name]=t.cssFrame,o(this.sheet,t.name,t.cssFrame),a(this.sheet,t))}getWorkColors(t){let e=[];for(let n of t.scenes){e=e.concat(this.getColorsFromStyle(n.style));for(let t of n.elements)e=e.concat(this.getColorsFromStyle(t.style))}return Array.from(new Set(e))}getColorsFromStyle(t){const e=[];for(let n in t)"background"===n&&e.push(t[n]),"color"===n&&e.push(t[n]);return e}}},"8aba":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"add-new-work"}},[n("div",{staticClass:"content-title"},[t._v("选择作品类型")]),n("div",{staticClass:"group"},[n("div",{staticClass:"group-title"},[t._v("竖屏展示")]),n("div",{staticClass:"new-types"},t._l(t.appType,(function(e){return n("div",{key:e.name,staticClass:"work-type",style:t.workSizeStyle(e)},[n("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"ratios"},[t._v(" "+t._s(e.width)+" X "+t._s(e.height)+" ")]),n("div",{staticClass:"action"},[n("button",{on:{click:function(n){return t.newWork(e.width,e.height)}}},[t._v("创建")])])])})),0)]),n("div",{staticClass:"group"},[n("div",{staticClass:"group-title"},[t._v("竖屏展示")]),n("div",{staticClass:"new-types"},t._l(t.video,(function(e){return n("div",{key:e.name,staticClass:"work-type",style:t.workSizeStyle(e)},[n("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"ratios"},[t._v(" "+t._s(e.width)+" X "+t._s(e.height)+" ")]),n("div",{staticClass:"action"},[n("button",{on:{click:function(n){return t.newWork(e.width,e.height)}}},[t._v("创建")])])])})),0)]),n("div",{staticClass:"group"},[n("div",{staticClass:"group-title"},[t._v("自由设计")]),n("div",{staticClass:"new-types"},t._l(t.video,(function(e){return n("div",{key:e.name,staticClass:"work-type",style:t.workSizeStyle(e)},[n("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"ratios"},[t._v(" "+t._s(e.width)+" X "+t._s(e.height)+" ")]),n("div",{staticClass:"action"},[n("button",{on:{click:function(n){return t.newWork(e.width,e.height)}}},[t._v("创建")])])])})),0)])])},s=[],r=(n("9d4c"),n("450d"),n("e450")),o=n.n(r);const a=[{name:"手机",width:360,height:640,img:"/res/9x16.jpg",desc:"适用于传统普通屏幕手机"},{name:"平板电脑(横)",width:1024,height:768,img:"/res/4x3.jpg",desc:"适用于iPad等4:3屏幕比例设备"},{name:"笔记本",width:1366,height:768,img:"/res/16x9.jpg",desc:"适用于桌面显示器、笔记本及电视等设备"},{name:"桌面显示器、电视",width:1920,height:1080,img:"/res/1x1.jpg",desc:"可以在任何设备打开，但四周会空置"}],u=[{name:"头像和挂件",width:960,height:960,img:"/res/9x16.jpg"}],c=[{name:"手机全面屏",width:1080,height:1920},{name:"1080p",width:1920,height:1080},{name:"超高清",width:1280,height:720},{name:"高清",width:720,height:480}];var l={name:"AddNew",components:{[o.a.name]:o.a},data(){return{appType:u,slideShow:a,video:c,columnHeight:200,workWidth:300,workHeight:200}},methods:{workSizeStyle(t){return{height:this.columnHeight+"px",width:this.columnHeight/t.height*t.width+"px"}},newWork(t,e){window.open(`/xd?width=${t}&height=${e}`)}}},h=l,d=(n("8ce5"),n("2877")),f=Object(d["a"])(h,i,s,!1,null,null,null);e["default"]=f.exports},"8ce5":function(t,e,n){"use strict";var i=n("c810"),s=n.n(i);s.a},"9d4c":function(t,e,n){},b812:function(t,e,n){"use strict";var i=n("b5f7"),s=n("7532");n("2c7e");e["a"]={data(){return{loading:!0,page:1,count:24,total:0,works:[]}},created(){this.workdao=new i["a"](this.ctx,"danke/work"),this.svgdao=new i["a"](this.ctx,"danke/svg"),this.ctx.styleRegistry=new s["a"]},methods:{listQuery(){return{creator:this.ctx.user.id}},viewport(){return{width:200,height:200}},horizontalViewPort(t){return{height:200,width:200/t.viewBox.height*t.viewBox.width}},horizontalViewPortStyle(t){return{height:"200px",width:200/t.viewBox.height*t.viewBox.width+"px"}},verticalViewPort(t){return{height:360,width:360/t.viewBox.height*t.viewBox.width}},verticalViewPortStyle(t){return{height:"360px",width:360/t.viewBox.height*t.viewBox.width+"px"}},async loadWorks(){const t=await this.workdao.list(Object.assign({projection:"updated,created,creator,name,id,frames,viewBox,title,author,avatar,color,snapshot",page:this.page,count:this.count},this.listQuery()));this.works=t.list,this.total=t.total,this.loading=!1}}}},ba11:function(t,e,n){"use strict";var i=n("4e4d"),s=n.n(i);s.a},c810:function(t,e,n){},d84e:function(t,e,n){},e450:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=114)}({0:function(t,e,n){"use strict";function i(t,e,n,i,s,r,o,a){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):s&&(u=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},10:function(t,e){t.exports=n("f3ad")},114:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["el-input-number",t.inputNumberSize?"el-input-number--"+t.inputNumberSize:"",{"is-disabled":t.inputNumberDisabled},{"is-without-controls":!t.controls},{"is-controls-right":t.controlsAtRight}],on:{dragstart:function(t){t.preventDefault()}}},[t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":t.minDisabled},attrs:{role:"button"},on:{keydown:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.decrease(e)}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-down":"minus")})]):t._e(),t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":t.maxDisabled},attrs:{role:"button"},on:{keydown:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.increase(e)}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-up":"plus")})]):t._e(),n("el-input",{ref:"input",attrs:{value:t.displayValue,placeholder:t.placeholder,disabled:t.inputNumberDisabled,size:t.inputNumberSize,max:t.max,min:t.min,name:t.name,label:t.label},on:{blur:t.handleBlur,focus:t.handleFocus,input:t.handleInput,change:t.handleInputChange},nativeOn:{keydown:[function(e){return!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.increase(e))},function(e){return!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.decrease(e))}]}})],1)},s=[];i._withStripped=!0;var r=n(10),o=n.n(r),a=n(22),u=n.n(a),c=n(30),l={name:"ElInputNumber",mixins:[u()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:c["a"]},components:{ElInput:o.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(t){return t>=0&&t===parseInt(t,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(t){var e=void 0===t?t:Number(t);if(void 0!==e){if(isNaN(e))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);e=Math.round(e/this.step)*i*this.step/i}void 0!==this.precision&&(e=this.toPrecision(e,this.precision))}e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.userInput=null,this.$emit("input",e)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var t=this.value,e=this.step,n=this.getPrecision,i=this.precision,s=n(e);return void 0!==i?(s>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(t),s)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var t=this.currentValue;if("number"===typeof t){if(this.stepStrictly){var e=this.getPrecision(this.step),n=Math.pow(10,e);t=Math.round(t/this.step)*n*this.step/n}void 0!==this.precision&&(t=t.toFixed(this.precision))}return t}},methods:{toPrecision:function(t,e){return void 0===e&&(e=this.numPrecision),parseFloat(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},getPrecision:function(t){if(void 0===t)return 0;var e=t.toString(),n=e.indexOf("."),i=0;return-1!==n&&(i=e.length-n-1),i},_increase:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t+n*e)/n)},_decrease:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t-n*e)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);this.setCurrentValue(e)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);this.setCurrentValue(e)}},handleBlur:function(t){this.$emit("blur",t)},handleFocus:function(t){this.$emit("focus",t)},setCurrentValue:function(t){var e=this.currentValue;"number"===typeof t&&void 0!==this.precision&&(t=this.toPrecision(t,this.precision)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e!==t&&(this.userInput=null,this.$emit("input",t),this.$emit("change",t,e),this.currentValue=t)},handleInput:function(t){this.userInput=t},handleInputChange:function(t){var e=""===t?void 0:Number(t);isNaN(e)&&""!==t||this.setCurrentValue(e),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var t=this.$refs.input.$refs.input;t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",this.max),t.setAttribute("aria-valuemin",this.min),t.setAttribute("aria-valuenow",this.currentValue),t.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var t=this.$refs.input.$refs.input;t.setAttribute("aria-valuenow",this.currentValue)}}},h=l,d=n(0),f=Object(d["a"])(h,i,s,!1,null,null,null);f.options.__file="packages/input-number/src/input-number.vue";var p=f.exports;p.install=function(t){t.component(p.name,p)};e["default"]=p},2:function(t,e){t.exports=n("5924")},22:function(t,e){t.exports=n("12f2")},30:function(t,e,n){"use strict";var i=n(2);e["a"]={bind:function(t,e,n){var s=null,r=void 0,o=function(){return n.context[e.expression].apply()},a=function(){Date.now()-r<100&&o(),clearInterval(s),s=null};Object(i["on"])(t,"mousedown",(function(t){0===t.button&&(r=Date.now(),Object(i["once"])(document,"mouseup",a),clearInterval(s),s=setInterval(o,100))}))}}}})},f529:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=75)}({0:function(t,e,n){"use strict";function i(t,e,n,i,s,r,o,a){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=u):s&&(u=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},15:function(t,e){t.exports=n("5128")},23:function(t,e){t.exports=n("41f8")},7:function(t,e){t.exports=n("2b0e")},75:function(t,e,n){"use strict";n.r(e);var i=n(7),s=n.n(i),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-message",t.type&&!t.iconClass?"el-message--"+t.type:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t.iconClass?n("i",{class:t.iconClass}):n("i",{class:t.typeClass}),t._t("default",[t.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:t._s(t.message)}}):n("p",{staticClass:"el-message__content"},[t._v(t._s(t.message))])]),t.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:t.close}}):t._e()],2)])},o=[];r._withStripped=!0;var a={success:"success",info:"info",warning:"warning",error:"error"},u={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+a[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout((function(){t.closed||t.close()}),this.duration))},keydown:function(t){27===t.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},c=u,l=n(0),h=Object(l["a"])(c,r,o,!1,null,null,null);h.options.__file="packages/message/src/main.vue";var d=h.exports,f=n(15),p=n(23),m=s.a.extend(d),v=void 0,g=[],w=1,y=function t(e){if(!s.a.prototype.$isServer){e=e||{},"string"===typeof e&&(e={message:e});var n=e.onClose,i="message_"+w++;e.onClose=function(){t.close(i,n)},v=new m({data:e}),v.id=i,Object(p["isVNode"])(v.message)&&(v.$slots.default=[v.message],v.message=null),v.$mount(),document.body.appendChild(v.$el);var r=e.offset||20;return g.forEach((function(t){r+=t.$el.offsetHeight+16})),v.verticalOffset=r,v.visible=!0,v.$el.style.zIndex=f["PopupManager"].nextZIndex(),g.push(v),v}};["success","warning","info","error"].forEach((function(t){y[t]=function(e){return"string"===typeof e&&(e={message:e}),e.type=t,y(e)}})),y.close=function(t,e){for(var n=g.length,i=-1,s=void 0,r=0;r<n;r++)if(t===g[r].id){s=g[r].$el.offsetHeight,i=r,"function"===typeof e&&e(g[r]),g.splice(r,1);break}if(!(n<=1||-1===i||i>g.length-1))for(var o=i;o<n-1;o++){var a=g[o].$el;a.style["top"]=parseInt(a.style["top"],10)-s-16+"px"}},y.closeAll=function(){for(var t=g.length-1;t>=0;t--)g[t].close()};var b=y;e["default"]=b}})}}]);