(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["preview~site~user"],{1308:function(e,t,n){"use strict";var i=n("d8ae"),s=n.n(i);s.a},"2c7e":function(e,t,n){"use strict";function i(e,t){if(e.width<t.width&&e.height<t.height)return e;var n=e.width/e.height,i=t.width/t.height,s={};return n>i?(s.fitTo="width",s.width=t.width,s.height=Math.floor(e.height*(t.width/e.width))):(s.fitTo="height",s.width=Math.floor(e.width*(t.height/e.height)),s.height=t.height),s}function s(e,t,n,i=""){let s=null;return s=t&&n?{left:e.x*n.width/t.width+"px",top:e.y*n.height/t.height+"px",width:e.width*n.width/t.width+"px",height:e.height*n.height/t.height+"px"}:{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"},s}function l(e,t,n=0){return e.x-t.x<t.width+n&&e.x-t.x>-n&&e.y-t.y<t.height+n&&e.y-t.y>-n}function r(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return r}))},"47c2":function(e,t,n){"use strict";function i(e,t,n,i="mfit"){return e?!e.endsWith(".svg")&&t&&n?this.ctx.IMG_SERVER+"/"+e+`?x-oss-process=image/format,png/quality,Q_80/resize,m_${i},h_${Math.floor(n)||100},w_${Math.floor(t)||100}`:this.ctx.IMG_SERVER+"/"+e:null}n.d(t,"a",(function(){return i}))},"57ff":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"element",class:e.elementClass,style:e.elementWrapperStyle,attrs:{id:"element-"+e.element.id},on:{click:e.elementClicked}},[e.elementUrl?n("img",{style:e.elementStyle,attrs:{id:"img-"+(e.element.name||e.element.id),src:e.elementUrl}}):e.element.content?n("div",{staticClass:"svg-content",style:e.elementStyle,domProps:{innerHTML:e._s(e.element.content)}}):e.element.elements?n("div",{staticClass:"block-elements",style:e.elementStyle},e._l(e.element.elements,(function(t,i){return n("render-element",{key:t.id,attrs:{"view-box":e.viewBox,"view-port":e.viewPort,element:t,index:i}})})),1):e.element.svg?n("svg",{style:e.elementStyle,attrs:{viewBox:"0 0 "+e.element.svg.vp[2]+" "+e.element.svg.vp[3]}},e._l(e.element.svg.ps,(function(e,t){return n("path",{key:t,attrs:{d:e.p,fill:e.f||"#76D9FC"}})})),0):e.element.html?n("div",{staticClass:"html",style:e.elementStyle,domProps:{innerHTML:e._s(e.element.html)}}):e.element.text?e._e():n("div",{staticClass:"shape",style:e.elementStyle}),e._l(e.elementTextLines,(function(t,i){return n("div",{key:i,staticClass:"text",style:e.textTransformStyle},[e._v(e._s(t))])})),null!=e.element.text&&e.element.editing?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.element.text,expression:"element.text"}],ref:"textarea",style:e.textEditStyle,domProps:{value:e.element.text},on:{change:e.updateTextArea,input:function(t){t.target.composing||e.$set(e.element,"text",t.target.value)}}}):e._e(),e.element.mask&&e.element.mask.svg?n("svg",{attrs:{viewBox:"0 0 "+e.element.mask.svg.vp[2]+" "+e.element.mask.svg.vp[3]}},[n("defs",[n("clipPath",{style:{transform:"scaleX("+e.element.width/e.element.mask.svg.vp[2]+") scaleY("+e.element.height/e.element.mask.svg.vp[3]+")"},attrs:{id:e.element.mask.uid}},e._l(e.element.mask.svg.ps.filter((function(e){return!e.f})),(function(e,t){return n("path",{key:t,attrs:{d:e.p}})})),0)]),e._l(e.element.mask.svg.ps.filter((function(e){return e.f})),(function(e,t){return n("path",{key:t,attrs:{d:e.p,fill:e.f}})}))],2):e._e(),e.filterSVG?n("div",{staticStyle:{display:"none"}},[n("svg",{domProps:{innerHTML:e._s(e.filterSVG)}})]):e._e()],2)},s=[],l=n("47c2"),r=n("2c7e"),a=n("8250"),o=n("ed88");var h=n("ddf3"),c={name:"RenderElement",components:{RenderElement:()=>Promise.resolve().then(n.bind(null,"57ff"))},props:{stage:{type:String,default:""},viewPort:{type:Object},viewBox:{type:Object},element:{type:Object},variables:{type:Array},index:{type:Number},selected:{type:Boolean}},data(){return{}},computed:{elementUrl(){const e=(this.variables||[]).filter(e=>"image"===e.type);return 1===e.length?e[0].value:this.element.url?this.getImageUrl(this.element.url,this.viewPort.width,this.viewPort.height):null},elementText(){const e=(this.variables||[]).filter(e=>"text"===e.type);return 1===e.length?e[0].value:this.element.text&&!this.element.editing?this.element.text:null},inlineStyle(){let e=this.element.variables.filter(e=>null!=e[this.stage]);if(e.length){let t={};Object(a["a"])(t,e,this.stage);let n={};return Object(a["a"])(n,e,"value"),`<style>\n          @keyframes ${this.element.id}-enter {\n            0% ${JSON.stringify(t).replace(/"/g,"")}\n            100% ${JSON.stringify(n).replace(/"/g,"")}\n          }\n        </style>`}return""},elementClass(){let e=[];return this.element.hidden&&e.push("hidden"),this.element.filter&&e.push(this.element.filter.name),e},filterSVG(){return this.element.filter&&this.element.filter.svgContent?this.element.filter.svgContent:null},textEditStyle(){const e={};if(Object.assign(e,this.element.style),this.viewPort&&this.viewBox&&this.element.variables.filter(e=>"fontSize"===e.name).length){const t=this.element.variables.filter(e=>"fontSize"===e.name)[0].value,n=t*this.viewPort.width/this.viewBox.width;n<8?e.display="none":e.fontSize=n+"px"}return e.height=this.element.height+"px",e},elementWrapperStyle(){const e={"--width":this.element.width+"px","--height":this.element.height+"px",backgroundColor:this.element.fill};if("vct"===this.element.type&&this.element.fill&&(e.maskImage=`url(${this.getImageUrl(this.element.url,2*this.viewPort.width,2*this.viewPort.height)})`,e.maskSize=this.element.fit),Object(a["a"])(e,this.element.variables),this.variables&&Object(a["a"])(e,this.variables.filter(e=>e.variable)),Object.assign(e,Object(r["b"])(this.element,this.viewBox,this.viewPort)),null!=this.element.text&&Object.assign(e,this.element.style),this.element.editing)Object.assign(e,{transform:""});else{const t=[];this.element.rotate&&t.push(`rotate(${this.element.rotate}deg)`),this.element.rotateX&&t.push("rotateX(180deg)"),this.element.rotateY&&t.push("rotateY(180deg)"),t.length&&Object.assign(e,{transform:t.join(" ")})}return e.perspective=(this.element.style.perspective||this.element.width)+"px",e},elementStyle(){const e={};return this.element.fit&&(e.objectFit=this.element.fit),this.element.maskImage&&(e.maskImage=this.element.maskImage),this.element.mask&&this.element.mask.uid&&(e.clipPath=`url("#${this.element.mask.uid}")`),Object.assign({},this.element.style,e,this.elementAnimationStyle)},textTransformStyle(){const e={};if(this.viewPort&&this.viewBox&&this.element.variables.filter(e=>"fontSize"===e.name).length){const t=this.element.variables.filter(e=>"fontSize"===e.name)[0].value,n=t*this.viewPort.width/this.viewBox.width;n<8?e.display="none":e.fontSize=n+"px",e.lineHeight=1.2*n+"px"}return Object.assign(e,this.elementAnimationStyle),e},elementAnimationStyle(){const e=this.element,t={};let n=[];if(e.animation.preview&&e.animation.preview.length?n=e.animation.preview:e.animation&&(n=e.animation[this.stage]),n&&n.length)if(1===n.length){const e=n[0];Object(a["a"])(t,e.variables),t.animation=`${e.name} ${e.duration}s ${h["a"][e.easing]} ${e.delay}s ${e.iterationCount} ${e.direction} ${e.fillMode}`}else{const e=[];for(let i=0;i<n.length;i++){const s=n[i];s.inner||(Object(a["a"])(t,s.variables),e.push(`${s.name} ${s.duration}s ${h["a"][s.easing]} ${s.delay}s ${s.iterationCount} ${s.direction} ${0===i?"backwards":""}`))}e.length&&(t.animation=e.join(","))}return t},elementTextLines(){return this.elementText?this.elementText.split("\n"):[]},elementTextFontSize(){let e=this.element.variables.filter(e=>"fontSize"===e.type);return e.length?e[0].value:1},elementTextWeight(){let e=this.element.variables.filter(e=>"fontWeight"===e.type);return e.length?e[0].value:1},elementTextContent(){return this.element.text.replace(/\n/g,"<br>")},elementSVGContent(){return this.ctx.styleRegistry.getVector(this.element.svg)},generatePath(){let e="";return this.element.path.points.forEach((t,n)=>{0===n?e+="M ":t.q?e+=`Q ${t.q.x} ${t.q.y} `:t.c?e+=`C ${t.c[0].x} ${t.c[0].y} ${t.c[1].x} ${t.c[1].y} `:t.a?e+=`A ${t.a.rx} ${t.a.ry} ${t.a.rot} ${t.a.laf} ${t.a.sf} `:e+="L ",e+=`${t.x} ${t.y} `}),this.closePath&&(e+="Z"),e}},mounted(){this.element.url&&this.element.url.endsWith(".svg")},methods:{getImageUrl:l["a"],updateTextArea(){const e=Object(o["a"])(this.elementTextContent,this.elementTextFontSize,this.elementTextWeight);e.width>this.element.width&&(this.element.width=e.width),this.element.height=e.height},appendTextTransform(e){this.viewPort&&this.viewBox&&this.element.text&&(e.transform?e.transform=e.transform+` scale(${this.viewPort.width/this.viewBox.width})`:e.transform=`scale(${this.viewPort.width/this.viewBox.width})`,"left"===this.element.style.textAlign&&(e.transformOrigin="left top"),"center"===this.element.style.textAlign&&(e.transformOrigin="center top"),"right"===this.element.style.textAlign&&(e.transformOrigin="right top"))},elementClicked(){console.log(this.element)},getElementAnimationStyle(e){},getElementPositionStyle(e){return{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}},render(e){},getImageDiv(){return this.$refs.img}}},m=c,u=(n("cc66"),n("2877")),d=Object(u["a"])(m,i,s,!1,null,null,null);t["default"]=d.exports},7532:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return c}));n("b5f7");function i(e){var t=document.createElement("style");return e&&(t.id=e),t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet}function s(e){var t=document.createElement("svg");return e&&(t.id=e),t.style.display="none",document.body.appendChild(t),t}function l(e,t){let n=e.length;e.insertRule(t,n)}function r(e,t,n){let i=e.length;const s="@keyframes "+t+"{"+n+"}";e.insertRule(s,i)}function a(e,t){let n=e.length;const i=`.${t.name} {\n    animation: ${t.name} ${t.duration}ms ${t.timing} both\n  }`;e.insertRule(i,n)}async function o(e,t,n){const i=new FontFace(n,`url('${t}')`);await i.load(),document.fonts.add(i)}const h=[{id:"微软雅黑",name:"系统字体"},{id:"HYLeMiaoTiJ",name:"汉仪乐喵体简",url:"/fonts/HYLeMiaoTiJ.woff"},{id:"HYZiYanHuanLeSongW",name:"汉仪字研欢乐宋",url:"/fonts/HYZiYanHuanLeSongW.woff"},{id:"ChenYanXingKai",name:"字由点字晨颜行楷",url:"/fonts/HelloFont_ID_ChenYanXingKai.woff"},{id:"ChunYiTi",name:"字由点字春意体",url:"/fonts/ChunYiTi.woff"},{id:"WenQuanYi",name:"文泉仪黑体",url:"/fonts/wqy-microhei.woff"},{id:"HanyiTianZhen",name:"汉仪天真体",url:"/fonts/HYTianZhenTi.woff"},{id:"HanyiZhangnairen",name:"汉仪张乃仁行书",url:"/fonts/HYZhangNaiRenXingShuJ.woff"},{id:"SentyCreamPuff",name:"汉仪新蒂泡芙体",url:"/fonts/SentyCreamPuff.woff"},{id:"HanyiSentyGarden",name:"汉仪新蒂花园体",url:"/fonts/HanyiSentyGarden.woff"},{id:"HYRunYuan-65J",name:"汉仪润圆简",url:"/fonts/HYRunYuan-65J.woff"},{id:"HelloFont_WenYiHei",name:"字由文艺黑",url:"/fonts/HelloFont_WenYiHei.woff"},{id:"HelloFont_ID_ShouXieTongZhenTi",name:"字由点字书写童真体",url:"https://font-public.canva.cn/YAD88jfJsos/0/HelloFont_ID_ShouXieTongZhenTi.4cd0f3e5c.f0e0481de2533d3c68f1257eececb02f.woff"}];class c{constructor(e){this.sheet=i("style-registry"),this.styles={},this.svgfilters=[],this.keyframes={},this.svgs={},this.fonts={}}clear(){this.sheet&&this.sheet.parentElement&&this.sheet.parentElement.removeChild(this.sheet),this.sheet=i("style-registry"),this.svg=s("svg-filter-registry"),this.svgfilters=[],this.styles={},this.keyframes={},this.svgs={},this.fonts={}}addVector(e){this.svgs[e._id]=e.content}getVector(e){return this.svgs[e]}async addFontFace(e){let t=e;"string"===typeof t&&(t=h.filter(t=>t.id===e)[0]),t&&t.url&&!this.fonts[t.id]&&(await o(this.sheet,t.url,t.id),this.fonts[t.id]=t.url)}addStyle(e){if(!this.styles[e.name]){this.styles[e.name]=e.cssContent;const n=e.cssContent.split("}");for(let e of n)if(e&&e.trim())try{l(this.sheet,e+"}")}catch(t){console.log("illgel css content",e)}e.svgContent&&this.svgfilters.push(e.svgContent)}}addFrames(e){for(let t in e)this.addFrame({name:t,cssFrame:e[t]})}addFrame(e){this.keyframes[e.name]||(this.keyframes[e.name]=e.cssFrame,r(this.sheet,e.name,e.cssFrame),a(this.sheet,e))}getWorkColors(e){let t=[];for(let n of e.scenes){t=t.concat(this.getColorsFromStyle(n.style));for(let e of n.elements)t=t.concat(this.getColorsFromStyle(e.style))}return Array.from(new Set(t))}getColorsFromStyle(e){const t=[];for(let n in e)"background"===n&&t.push(e[n]),"color"===n&&t.push(e[n]);return t}}},"7b03":function(e,t,n){},8250:function(e,t,n){"use strict";function i(e,t,n){let i=n||"value";if(t&&t.length)for(let s of t)"px"===s.type||"fontSize"===s.type?Object.assign(e,{["--"+s.name]:s[i]+"px"}):"percent"===s.type?Object.assign(e,{["--"+s.name]:s[i]+"%"}):"deg"===s.type?Object.assign(e,{["--"+s.name]:s[i]+"deg"}):Object.assign(e,{["--"+s.name]:s[i]})}n.d(t,"a",(function(){return i}))},"8b3e":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scene",class:e.sceneClass,style:e.sceneStyle,on:{click:function(t){return e.$emit("click")}}},e._l(e.scene.elements,(function(t){return n("render-element",{key:t.id,attrs:{variables:e.getElementVariable(t),"view-port":e.viewPort,element:t,"view-box":e.viewBox,stage:e.stage}})})),1)},s=[],l=n("57ff"),r={name:"RenderScene",components:{RenderElement:l["default"]},props:{scale:{type:Number,default:1},variables:{type:Array,dafault:function(){return[]}},stage:{type:String},viewBox:{type:Object},scene:{type:Object},viewPort:{type:Object}},computed:{sceneClass(){const e=[];for(let t in this.scene.style)this.scene.style[t]&&this.scene.style[t].name&&e.push(this.scene.style[t].name);return e},sceneStyle(){const e={width:this.viewPort.width+"px",height:this.viewPort.height+"px",zIndex:this.scene.z,transform:"scale("+this.scale+")",backgroundColor:this.scene.color};for(let t in this.scene.style)this.scene.style[t]&&!this.scene.style[t].name&&Object.assign(e,{[t]:this.scene.style[t]});return e}},methods:{getElementVariable(e){return this.variables?this.variables.filter(t=>t.element===e.id):[]}}},a=r,o=(n("1308"),n("2877")),h=Object(o["a"])(a,i,s,!1,null,"6595db69",null);t["a"]=h.exports},cc66:function(e,t,n){"use strict";var i=n("7b03"),s=n.n(i);s.a},d8ae:function(e,t,n){},ddf3:function(e,t,n){"use strict";t["a"]={ease:"ease",linear:"linear",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"}},ed88:function(e,t,n){"use strict";t["a"]=function(e,t,n){let i=document.getElementById("textMesure");return i||(i=document.createElement("div"),i.id="textMesure",i.style.position="absolute",i.style.visibility="hidden",i.style.width="auto",i.style.height="auto",i.style.whiteSpace="nowrap",document.body.append(i)),i.style.fontSize=t+"px",i.style.fontWeight=n,i.innerHTML=e,{width:i.clientWidth+10,height:i.clientHeight+1}}}}]);